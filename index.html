<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ‚Äî –ö–∞–ø–∏—Ç–∞–ª–∏–∑–º –∏ –ö–æ–º–º—É–Ω–∏–∑–º</title>
<style>
body{margin:0;font-family:system-ui,Arial,sans-serif;background:#0b0f14;color:#e6edf3}
a{color:#5fb3ff;text-decoration:none}
header,nav,main,footer{max-width:1100px;margin:0 auto;padding:12px}
nav a{margin-right:12px;padding:6px 10px;border:1px solid #2a3b52;border-radius:8px}
nav a.active{background:#1a2636}
.card{border:1px solid #22324a;border-radius:12px;padding:12px;margin:12px 0;background:#0f1622}
h1,h2,h3{margin:0 0 8px}
.row{display:flex;gap:6px;align-items:center;flex-wrap:wrap;margin:4px 0}
button{padding:4px 8px;border-radius:6px;border:1px solid #2a3b52;background:#122033;color:#e6edf3;cursor:pointer}
.result{margin-top:10px;padding:10px;border:1px dashed #2a3b52;border-radius:8px}
.small{opacity:.8;font-size:13px}
</style>
</head>
<body>
<header><h1>–ö–∞–ø–∏—Ç–∞–ª–∏–∑–º –∏ –ö–æ–º–º—É–Ω–∏–∑–º</h1></header>
<nav>
    <a href="index.html#calc" class="active">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a>
  <a href="rules.html">–ü—Ä–∞–≤–∏–ª–∞</a>
  <a href="cards.html">–ë–∞–∑–∞ –∫–∞—Ä—Ç</a>
</nav>

<main>
<div class="card">
<h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–±–æ—Ä–∫–∏ / —Ä–∞–∑–±–æ—Ä–∫–∏</h2>

<div id="controls"></div>

<div class="row">
<button onclick="mode='build';recalc()">–°–±–æ—Ä–∫–∞ ‚¨ÜÔ∏è</button>
<button onclick="mode='break';recalc()">–†–∞–∑–±–æ—Ä–∫–∞ ‚¨áÔ∏è</button>
</div>

<div id="out" class="result">‚Äî</div>

<p class="small">
–õ–∏–º–∏—Ç—ã: –Ω–µ –±–æ–ª–µ–µ 3 –∫–∞—Ä—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤ –¥–µ–Ω—å.  
–ö–æ–º–∏—Å—Å–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ë–∞–Ω–∫.
</p>
</div>
</main>

<footer>GitHub Pages</footer>

<script>
const ladder = [
  {k:'g', n:'‚òëÔ∏è', to:3},
  {k:'b', n:'üü¶', to:2},
  {k:'gr',n:'üü©', to:2},
  {k:'w', n:'‚¨úÔ∏è', to:2},
  {k:'o', n:'üüß', to:2},
  {k:'e', n:'üíé', to:3},
  {k:'r', n:'üö®'}
];

let state = {g:0,b:0,gr:0,w:0,o:0,e:0,r:0};
let mode = 'build';

function renderControls(){
  const c = document.getElementById('controls');
  c.innerHTML='';
  ladder.forEach(l=>{
    c.innerHTML+=`
      <div class="row">
        <strong>${l.n}</strong>
        <button onclick="chg('${l.k}',-1)">‚àí</button>
        <span>${state[l.k]}</span>
        <button onclick="chg('${l.k}',1)">+</button>
      </div>`;
  });
}
function chg(k,d){ state[k]=Math.max(0,state[k]+d); recalc(); }

function recalc(){
  let s = {...state};
  let log=[];
  if(mode==='build'){
    for(let i=0;i<ladder.length-1;i++){
      const cur=ladder[i], next=ladder[i+1];
      const c=Math.floor(s[cur.k]/cur.to||0);
      if(c>0){
        s[cur.k]-=c*cur.to;
        s[next.k]+=c;
        log.push(`${c*cur.to} ${cur.n} ‚Üí ${c} ${next.n}`);
      }
    }
  } else {
    for(let i=ladder.length-1;i>0;i--){
      const cur=ladder[i], prev=ladder[i-1];
      const c=s[cur.k];
      if(c>0){
        s[cur.k]=0;
        s[prev.k]+=c*prev.to;
        log.push(`${c} ${cur.n} ‚Üí ${c*prev.to} ${prev.n}`);
      }
    }
  }

  const res=[];
  ladder.slice().reverse().forEach(l=>{
    if(s[l.k]) res.push(`${l.n} ${s[l.k]}`);
  });

  document.getElementById('out').innerHTML=
    (log.length?'<b>–û–ø–µ—Ä–∞—Ü–∏–∏:</b><br>'+log.join('<br>')+'<hr>':'')+
    (res.length?'<b>–†–µ–∑—É–ª—å—Ç–∞—Ç:</b><br>'+res.join('<br>'):'‚Äî');
}

renderControls();
</script>
</body>
</html>
