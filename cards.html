<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<title>Ğ‘Ğ°Ğ·Ğ° ĞºĞ°Ñ€Ñ‚ â€” ĞšĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ»Ğ¸Ğ·Ğ¼ Ğ¸ ĞšĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸Ğ·Ğ¼</title>
<style>
body{margin:0;font-family:system-ui,Arial,sans-serif;background:#0b0f14;color:#e6edf3}
a{color:#5fb3ff;text-decoration:none}
header,nav,main,footer{max-width:1100px;margin:0 auto;padding:12px}
nav a{margin-right:12px;padding:6px 10px;border:1px solid #2a3b52;border-radius:8px}
nav a.active{background:#1a2636}
.card{border:1px solid #22324a;border-radius:12px;padding:12px;margin:12px 0;background:#0f1622}
h1,h2,h3{margin:0 0 8px}
ul{padding-left:18px}
input{padding:6px;border-radius:6px;border:1px solid #2a3b52;background:#0b1220;color:#e6edf3}
button{padding:6px 10px;border-radius:8px;border:1px solid #2a3b52;background:#122033;color:#e6edf3}

.imgGrid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:10px;
}
.cardTile{
  position:relative;
  border:1px solid var(--line,#2a3b52);
  border-radius:12px;
  background:var(--card,#0f1622);
  overflow:hidden;
  cursor:pointer;
  padding:8px;
}
.cardTile img{
  width:100%;
  height:160px;
  object-fit:cover;
  border-radius:10px;
  display:block;
}
.cardTile .cap{
  margin-top:6px;
  font-size:13px;
  opacity:.9;
  word-break:break-word;
}
.cardTile.selected{
  outline:2px solid rgba(95,179,255,.9);
  border-color:rgba(95,179,255,.5);
  background:rgba(95,179,255,.08);
}
.cardTile .check{
  position:absolute;
  top:8px; right:8px;
  background:rgba(11,15,20,.85);
  border:1px solid rgba(95,179,255,.6);
  border-radius:999px;
  padding:2px 8px;
  font-size:12px;
  display:none;
}
.cardTile.selected .check{display:block}
.selList .item{padding:6px 0;border-top:1px solid rgba(42,59,82,.55)}
.selList .item:first-child{border-top:0}
.selList b{font-weight:700}

.modal{position:fixed;inset:0;display:none;z-index:200}
.modal.on{display:block}
.modalBackdrop{position:absolute;inset:0;background:rgba(0,0,0,.55)}
.modalPanel{
  position:relative;
  max-width:820px;
  margin:8vh auto;
  background:var(--card,#0f1622);
  border:1px solid rgba(42,59,82,.85);
  border-radius:16px;
  padding:12px;
  box-shadow:0 20px 60px rgba(0,0,0,.55);
}
@media (max-width:560px){
  .modalPanel{margin:5vh 10px}
  #mImg{width:120px;height:160px}
}
</style>
</head>
<body>
<header><h1>ĞšĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ»Ğ¸Ğ·Ğ¼ Ğ¸ ĞšĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸Ğ·Ğ¼</h1></header>
<nav>
    <a href="calc.html">ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€</a>
  <a href="rules.html">ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°</a>
  <a href="cards.html">Ğ‘Ğ°Ğ·Ğ° ĞºĞ°Ñ€Ñ‚</a>
</nav>
<main>

<div class="card">
  <h2>Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚</h2>
  <p class="small">
    Ğ’Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ°Ñ€Ñ‚ ĞºĞ»Ğ¸ĞºĞ¾Ğ¼ Ğ¿Ğ¾ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸Ğ· Ğ¿Ğ°Ğ¿ĞºĞ¸ <b>cards/</b>. ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ´Ñ‚ÑĞ³Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ¸Ğ· <b>messages.html</b> Ñ‚Ğ°Ğ¼, Ğ³Ğ´Ğµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑĞ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ.
  </p>

  <div class="row" style="gap:10px">
    <label class="small">ĞŸĞ¾Ğ¸ÑĞº</label>
    <input id="imgSearch" type="text" placeholder="ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°/ĞºĞ°Ñ€Ñ‚Ñ‹â€¦" style="flex:1;min-width:220px;padding:7px 10px;border-radius:10px;border:1px solid var(--line,#2a3b52);background:#0b1220;color:var(--fg,#e6edf3)">
    <button class="ghost" type="button" id="clearSel">Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°</button>
  </div>

  <div class="row small" style="gap:10px">
    <span class="pill" id="count">0</span>
    <span>ĞºĞ°Ñ€Ñ‚ Ğ² Ğ²Ñ‹Ğ´Ğ°Ñ‡Ğµ</span>
  </div>

  <div id="imgGrid" class="imgGrid"></div>
</div>

<div class="card">
  <h2>Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾</h2>
  <div id="selList" class="selList small">â€”</div>
</div>

<div id="cardModal" class="modal" aria-hidden="true">
  <div class="modalBackdrop" data-close="1"></div>
  <div class="modalPanel" role="dialog" aria-modal="true" aria-label="ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°">
    <div class="row" style="justify-content:space-between;align-items:flex-start">
      <div style="font-size:18px"><b id="mTitle">â€”</b></div>
      <button class="ghost" type="button" data-close="1">Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ</button>
    </div>
    <div class="row" style="gap:12px;align-items:flex-start;flex-wrap:nowrap">
      <img id="mImg" src="" alt="" onerror="this.style.opacity=.25;" style="width:160px;height:200px;object-fit:cover;border-radius:12px;border:1px solid rgba(42,59,82,.8)">
      <div style="flex:1;min-width:0">
        <div id="mDesc" class="small" style="white-space:pre-wrap">â€”</div>
        <hr>
        <div class="row" style="gap:10px">
          <button class="primary" type="button" id="mToggle">Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ</button>
          <button class="ghost" type="button" id="mPrev">â†</button>
          <button class="ghost" type="button" id="mNext">â†’</button>
        </div>
        <div class="small" style="opacity:.75;margin-top:4px" id="mPath">â€”</div>
        <div class="small" style="opacity:.7;margin-top:4px">ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°: Shift+ĞºĞ»Ğ¸Ğº Ğ¿Ğ¾ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞµ â€” Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ/ÑĞ½ÑÑ‚ÑŒ Ğ±ĞµĞ· Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ.</div>
      </div>
    </div>
  </div>
</div>

</main>
<footer>GitHub Pages</footer>
<script>
(function(){
  const CARD_FILES = [
    "angel.jpg",
    "antiekran.jpg",
    "bank.jpg",
    "bank_sivyi_merin.jpg",
    "bankrot.jpg",
    "bita.jpg",
    "black.jpg",
    "blue.jpg",
    "capitalism_communism.jpg",
    "chameleon.jpg",
    "chb.jpg",
    "commission.jpg",
    "content_card.jpg",
    "converter.jpg",
    "emerald.jpg",
    "exterminatus.jpg",
    "gift_12min.jpg",
    "gold.jpg",
    "golden_scales.jpg",
    "grabiteli.jpg",
    "gray.jpg",
    "green.jpg",
    "jackpot_cards.jpg",
    "joker.jpg",
    "kost_1.jpg",
    "kost_2.jpg",
    "last_judgement_1.jpg",
    "last_judgement_2.jpg",
    "liftador.jpg",
    "magnet.jpg",
    "matreshki.jpg",
    "mayak_bezishodnosti.jpg",
    "minus_1h.jpg",
    "minus_3h.jpg",
    "musical.jpg",
    "obnulenie.jpg",
    "obosran.jpg",
    "pacific.jpg",
    "pergament_blue.jpg",
    "pergament_gold.jpg",
    "pink.jpg",
    "preispodnya.jpg",
    "rainbow.jpg",
    "red.jpg",
    "ruby_bank.jpg",
    "ruby_kost_1.jpg",
    "ruby_kost_2.jpg",
    "ruby_plus3.jpg",
    "safe.jpg",
    "sweets.jpg",
    "temple.jpg",
    "topor.jpg",
    "tv_wheel.jpg",
    "tv_wheel_3.jpg",
    "tv_wheel_5.jpg",
    "vedro_egora.jpg",
    "wheel_eater_1.jpg",
    "wheel_eater_2.png",
    "wheel_eater_round.png",
    "white.jpg",
    "yellow.jpg",
    "zabanen.jpg",
    "zamorozka.jpg"
  ];

  const DESC_BY_STEM = {
  "antiekran": `Ğ­Ñ„Ñ„ĞµĞºÑ‚Ñ‹:
Ğ—Ğ°Ğ¿Ñ€ĞµÑ‰Ğ°ĞµÑ‚ ÑĞ¿Ğ¸ĞºĞµÑ€Ñƒ Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒÑÑ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ ÑÑ„Ğ¸Ñ€Ğ° Ğ¸ ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚ÑŒ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾.
ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:
ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°Ğ· Ğ¿Ñ€Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸.
ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
:  Ğ¢Ğ¾Ğ¿ Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»Ğ¸. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ. Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ. ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾.
ğŸ›
ğŸ’’ ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ». ĞÑ‚  â¬œï¸
ğŸ’
ğŸš¨
ğŸ”²
ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:
Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ ĞºĞ°Ñ€Ñ‚Ğ° Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ Ğ¸ ĞºĞ°Ñ€Ñ‚Ğ° ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸.
ğŸ´â†©ï¸ğŸ§§
Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ:
ğŸƒğŸ…±ï¸âš«ï¸ğŸ›ğŸª½
Ğ—Ğ°Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ
: â“‚ï¸â™ï¸
ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ°:
ĞĞµÑ‚
ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ°:
Ğ”Ğ°
ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ:
Ğ”Ğ°
ğŸ´â†©ï¸ğŸ§§
Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞºĞ°Ñ€Ñ‚Ñ‹:
ĞĞµÑ‚
ĞĞµĞ»ÑŒĞ·Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
ğŸŸ§ğŸ’
ğŸš¨
ğŸ”²
ğŸƒğŸŒˆğŸª½â˜‘ï¸
Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°:
(ğŸŸ¦â•â˜‘ï¸â•â˜‘ï¸ğŸŸ°ğŸš¾)`,
  "gold": `Ğ­Ñ„Ñ„ĞµĞºÑ‚Ñ‹:
ĞœĞ¾Ğ´ĞµÑ€ĞºĞ° Ğ½Ğ° ÑÑƒÑ‚ĞºĞ¸. Ğ Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ° ĞºĞ°Ñ€Ñ‚ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹. Ğ˜Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚ Ğº Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°Ğ¼.
ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:
ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ. Ğ’Ğ¼ĞµÑÑ‚Ğ¾ Ğ¼Ğ¾Ğ´ĞµÑ€ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ»ĞµĞ½Ğ¸Ğµ 1 Ñ€Ğ°Ğ· Ğ·Ğ° ÑÑ„Ğ¸Ñ€ Ğ½Ğ° 1 Ñ‡Ğ°Ñ.
ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
:  Ğ¢Ğ¾Ğ¿ ÑĞ¿Ğ¾Ğ½ÑĞ¾Ñ€Ñ‹. Ğ¢Ğ¾Ğ¿ Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»Ğ¸. Ğ¢Ğ¾Ğ¿ Ğ‘Ğ°Ñ‚Ğ»Ñ‹. Ğ¢Ğ¾Ğ¿ Ğ›Ğ¸Ğ³Ğ¸. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ. ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾.
ğŸ›
ğŸ§ğŸ’’
ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:
Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ°Ğº Ğ¼Ğ¾Ğ´ĞµÑ€ Ñ ğŸ’ğŸ”²ğŸš¨
(Ğ Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ° Ğ‘ĞµĞ·Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚ğŸŸªğŸŸ¥ğŸŸ¨ğŸŸ«Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸ÑğŸ§§)
Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ:
ğŸ…±ï¸âš«ï¸ğŸ’£ğŸŒ‹
Ğ—Ğ°Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ
: â™ï¸â“‚ï¸
ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ°:
ĞĞµÑ‚
ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ°:
Ğ”Ğ°
ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ:
ĞĞµÑ‚
Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞºĞ°Ñ€Ñ‚Ñ‹:
ĞĞµÑ‚
ĞĞµĞ»ÑŒĞ·Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
Ğ•ÑĞ»Ğ¸ Ñƒ Ğ²Ğ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ ÑÑ‚Ğ¸ ĞºĞ°Ñ€Ñ‚Ñ‹ ğŸƒâ˜®ï¸ğŸŒˆğŸª½ğŸš¨
ğŸ”²
ğŸ’.
Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°:
(
â¬œï¸â•â¬œï¸ğŸŸ°ğŸŸ§
)`,
  "joker": `Ğ­Ñ„Ñ„ĞµĞºÑ‚Ñ‹:
Ğ’Ğ°ÑˆĞ° ĞºĞ°Ñ€Ñ‚Ğ° Ğ´ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ. Ğ‘Ğ°Ñ‚Ğ» ĞºĞ°Ñ€Ñ‚Ğ°, Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ½Ğ°Ñ€ÑƒÑˆĞ°Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿Ğ¾ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ Ğº Ñ‚ĞµĞ¼ Ñƒ ĞºĞ¾Ğ³Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° ÑÑ‚Ğ° ĞºĞ°Ñ€Ñ‚Ğ°. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ±Ğ°Ñ‚Ğ»Ğ¾Ğ² ÑĞ¿Ğ¸ĞºĞµÑ€Ğ¾Ğ². ĞšÑ€ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ° Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹. Ğ”Ğ¾Ğ¿ÑƒÑĞºÑƒ Ğº ÑĞºÑ€Ğ°Ğ½Ñƒ Ğ¸ ĞœĞ¸ĞºÑ€Ğ¾Ñ„Ğ¾Ğ½Ñƒ.
ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:
Ğ”ĞµĞ¹ÑÑ‚Ğ²ÑƒĞµÑ‚ 20 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ±Ğ°Ñ‚Ğ»Ğ° Ğ¸ 24 Ñ‡Ğ°ÑĞ° Ğ¾Ğ±Ñ…Ğ¾Ğ´ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» Ğº
ğŸƒ
Ğ¸ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑ.
ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
: Ğ¢Ğ¾Ğ¿ Ğ‘Ğ°Ñ‚Ğ»Ñ‹. Ğ¢Ğ¾Ğ¿ Ğ›Ğ¸Ğ³Ğ¸. Ğ¢Ğ¾Ğ¿ Ğ—Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒ. Ğ¢Ğ¾Ğ¿ ĞœĞµÑÑÑ†. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ. Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ. ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾.
ğŸ›
ğŸ’’
ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:
ĞĞµĞ»ÑŒĞ·Ñ Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ Ğ¼Ğ¸ĞºÑ€Ğ¾Ñ„Ğ¾Ğ½. Ğ—Ğ°Ğ¿Ñ€ĞµÑ‚Ğ¸Ñ‚ÑŒ ÑĞºÑ€Ğ°Ğ½ğŸš¾. ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğµ Ğ±Ğ¾Ğ»ĞµĞµ Ğ´Ğ²ÑƒÑ… Ğ·Ğ° ÑÑ„Ğ¸Ñ€ Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğ¸ Ñ‚Ğ°ĞºĞ¾Ğ¹ Ğ¶Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹ Ñƒ Ğ¾Ğ¿Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°. Ğ’ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞµ Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ğ°ĞµÑ‚ Ğ¾Ñ‚ ğŸŸªğŸŸ«ğŸŸ¨ğŸŸ¥â¬›ï¸ğŸ‘¹ğŸª“â™¥ï¸. ĞŸÑ€Ğ¸ Ğ²Ñ‹Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğ¸ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ñ… ğŸ²ĞšĞ¾ÑÑ‚ĞµĞ¹, Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚ 2 ĞºÑƒĞ±Ğ¸ĞºĞ°.
Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ:
ğŸ…±ï¸âš«ï¸ğŸŒ‹
Ğ—Ğ°Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ
: â“‚ï¸â™ï¸
ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ°:
ĞĞµÑ‚
ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ°:
Ğ”Ğ°.
ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ:
ĞĞµÑ‚
Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞºĞ°Ñ€Ñ‚Ñ‹:
Ğ”Ğ°
ĞĞµĞ»ÑŒĞ·Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğ¸ Ğ¾Ğ¿Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°. Ğ•ÑĞ»Ğ¸ Ğ½Ğ°Ğ´ĞµÑ‚Ğ° Ğ´Ñ€ÑƒĞ³Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°.
Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°:
(ğŸŸ§â•â¬œï¸â•ğŸŸ©â•â˜‘ï¸ğŸŸ°
ğŸƒ
)`,
  "pacific": `Ğ­Ñ„Ñ„ĞµĞºÑ‚Ñ‹:
Ğ’Ğ°ÑˆĞ° ĞºĞ°Ñ€Ñ‚Ğ°ğŸ´ Ğ´ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ. Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ ğŸŸ«ğŸŸ¥. Ğ”Ğ°Ñ‘Ñ‚ Ğ¸Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚ Ğº ğŸŸ«ğŸŸ¥ Ğ¸ ğŸ…¾ï¸Ğ¾Ğ±Ğ½ÑƒĞ»ĞµĞ½Ğ¸Ñ Ğ½Ğ° 24 Ñ‡Ğ°ÑĞ°. ĞšÑ€ÑƒÑ‚Ğ¸Ñ‚ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾ Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹.
ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:
Ğ”ĞµĞ¹ÑÑ‚Ğ²ÑƒĞµÑ‚ 24 Ñ‡Ğ°ÑĞ°.
ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
:  Ğ¢Ğ¾Ğ¿ Ğ‘Ğ°Ñ‚Ğ»Ñ‹. Ğ¢Ğ¾Ğ¿ Ğ›Ğ¸Ğ³Ğ¸. Ğ¢Ğ¾Ğ¿ Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒ. Ğ¢Ğ¾Ğ¿ Ğ¼ĞµÑÑÑ†Ğ°. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ. Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ.  ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾.
ğŸ›
ğŸ’’
ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:
Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ‡Ğ°Ñ‚Ñƒ Ğ¸ Ğ³Ğ¾ÑÑ‚ĞµĞ²Ğ¾Ğ¼Ñƒ Ğ¿Ñ€Ğ¸ ğŸ…¾ï¸ĞĞ±Ğ½ÑƒĞ»ĞµĞ½Ğ¸Ğ¸.
Ğ’ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞµ Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ğ°ĞµÑ‚ Ğ¾Ñ‚ ğŸŸ¥ğŸŸ«ğŸ…¾ï¸â™ ï¸.
ĞŸÑ€Ğ¸ Ğ²Ñ‹Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğ¸ ğŸš¾ğŸ“œâ˜®ï¸ Ğ²Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚Ğµ Ñ…2 Ğº ÑÑ‚Ğ¸Ğ¼ ĞºĞ°Ñ€Ñ‚Ğ°Ğ¼.
Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ:
ğŸ…±ï¸âš«ï¸ğŸŒ‹
Ğ—Ğ°Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ
: â“‚ï¸â™ï¸
ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ°:
ĞĞµÑ‚
ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ°:
Ğ”Ğ°.
ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ:
ĞĞµÑ‚
Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞºĞ°Ñ€Ñ‚Ñ‹:
ĞĞµÑ‚
ĞĞµĞ»ÑŒĞ·Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
Ğ•ÑĞ»Ğ¸ Ñƒ Ğ²Ğ°Ñ ğŸ…¾ï¸ Ğ²Ğ¼ĞµÑÑ‚Ğµ Ñ ğŸ’ Ğ—Ğ°Ğ¼Ğ¾Ñ€Ğ¾Ğ·ĞºĞ¾Ğ¹.
Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°:
(â¬œï¸â•ğŸŸ©â•ğŸŸ¦â•ğŸ“œğŸŸ°â˜®ï¸)`,
  "pergament_blue": `Ğ­Ñ„Ñ„ĞµĞºÑ‚Ñ‹:
Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ ğŸŸ« ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¸ Ğ´Ğ°Ñ‘Ñ‚ Ğ¸Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚ Ğ½Ğ° 24 Ñ‡Ğ°ÑĞ° Ğº ğŸŸ«.
ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:
ĞœĞ½Ğ¾Ğ³Ğ¾ĞºÑ€Ğ°Ñ‚Ğ½Ğ¾
ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
: Ğ¢Ğ¾Ğ¿ Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»Ğ¸. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ. Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°. ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾.
ğŸ›
ğŸ’’
ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:
Ğ—Ğ°Ñ‰Ğ¸Ñ‰Ğ°ĞµÑ‚ Ğ¾Ñ‚ ğŸŸ« Ñ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ°. ĞœĞ°Ğ³Ğ¸Ñ Ğ¿Ğ¾Ñ‡ĞºĞ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ ÑĞ¿Ğ¸ĞºĞµÑ€Ğ¾Ğ². Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ Ğ¿ĞµÑ€Ğ³Ğ°Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ¼ ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚Ğµ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾, Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğ¸
ğŸ“œ
, Ğ²ÑĞµ ĞºÑ‚Ğ¾ Ğ² Ğ³Ğ¾ÑÑ‚ĞµĞ²Ğ¾Ğ¼ Ñ‚Ğ¾Ğ¶Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚
ğŸ“œ
.
Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ:
ğŸ…¾ï¸ğŸ…±ï¸âš«ï¸ğŸŒ‹
Ğ—Ğ°Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ
: â“‚ï¸â™ï¸
ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ°:
ĞĞµÑ‚
ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ°:
Ğ”Ğ°
ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ:
ĞĞµÑ‚
Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞºĞ°Ñ€Ñ‚Ñ‹:
ĞĞµÑ‚
ĞĞµĞ»ÑŒĞ·Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
Ğ•ÑĞ»Ğ¸ Ñƒ Ğ²Ğ°Ñ ğŸ…¾ï¸ĞĞ±Ğ½ÑƒĞ»ĞµĞ½Ğ¸Ğµ.
Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°:
(ğŸŸ©â•ğŸŸ¦â•â˜‘ï¸ğŸŸ°
ğŸ“œ
)`,
  "pergament_gold": `Ğ­Ñ„Ñ„ĞµĞºÑ‚Ñ‹:
Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ ğŸŸ« ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¸ Ğ´Ğ°Ñ‘Ñ‚ Ğ¸Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚ Ğ½Ğ° 24 Ñ‡Ğ°ÑĞ° Ğº ğŸŸ«.
ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ:
ĞœĞ½Ğ¾Ğ³Ğ¾ĞºÑ€Ğ°Ñ‚Ğ½Ğ¾
ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
: Ğ¢Ğ¾Ğ¿ Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»Ğ¸. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ. Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°. ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾.
ğŸ›
ğŸ’’
ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:
Ğ—Ğ°Ñ‰Ğ¸Ñ‰Ğ°ĞµÑ‚ Ğ¾Ñ‚ ğŸŸ« Ñ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ°. ĞœĞ°Ğ³Ğ¸Ñ Ğ¿Ğ¾Ñ‡ĞºĞ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ ÑĞ¿Ğ¸ĞºĞµÑ€Ğ¾Ğ². Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ Ğ¿ĞµÑ€Ğ³Ğ°Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ¼ ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚Ğµ ğŸ§¿Ğ¢Ğ’ ĞºĞ¾Ğ»ĞµÑĞ¾, Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğ¸
ğŸ“œ
, Ğ²ÑĞµ ĞºÑ‚Ğ¾ Ğ² Ğ³Ğ¾ÑÑ‚ĞµĞ²Ğ¾Ğ¼ Ñ‚Ğ¾Ğ¶Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚
ğŸ“œ
.
Ğ¡Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ:
ğŸ…¾ï¸ğŸ…±ï¸âš«ï¸ğŸŒ‹
Ğ—Ğ°Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ
: â“‚ï¸â™ï¸
ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ°:
ĞĞµÑ‚
ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ°:
Ğ”Ğ°
ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ:
ĞĞµÑ‚
Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞºĞ°Ñ€Ñ‚Ñ‹:
ĞĞµÑ‚
ĞĞµĞ»ÑŒĞ·Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
Ğ•ÑĞ»Ğ¸ Ñƒ Ğ²Ğ°Ñ ğŸ…¾ï¸ĞĞ±Ğ½ÑƒĞ»ĞµĞ½Ğ¸Ğµ.
Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°:
(ğŸŸ©â•ğŸŸ¦â•â˜‘ï¸ğŸŸ°
ğŸ“œ
)`
};

  function stem(fn){ return String(fn).toLowerCase().replace(/\.[a-z0-9]+$/i,''); }
  function pretty(fn){ return stem(fn).replace(/[_-]+/g,' '); }
  function esc(s){ return String(s).replace(/[&<>"]/g, c => ({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[c])); }

  // Active nav (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ñƒ)
  document.querySelectorAll('nav a').forEach(a=>{
    const href=(a.getAttribute('href')||'').toLowerCase();
    if(href==='cards.html') a.classList.add('active');
  });

  const sel = new Set();
  let lastList = CARD_FILES.slice();
  let curFn = null;

  const grid = document.getElementById('imgGrid');
  const q = document.getElementById('imgSearch');
  const clearBtn = document.getElementById('clearSel');
  const selList = document.getElementById('selList');
  const countEl = document.getElementById('count');

  // modal refs
  const modal = document.getElementById('cardModal');
  const mTitle = document.getElementById('mTitle');
  const mImg = document.getElementById('mImg');
  const mDesc = document.getElementById('mDesc');
  const mPath = document.getElementById('mPath');
  const mToggle = document.getElementById('mToggle');
  const mPrev = document.getElementById('mPrev');
  const mNext = document.getElementById('mNext');

  function openModal(fn){
    curFn = fn;
    const st = stem(fn);
    const name = pretty(fn);
    const desc = DESC_BY_STEM[st] || 'ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑƒÑ‚Ğ¾Ñ‡Ğ½ÑĞµÑ‚ÑÑ (Ğ½ĞµÑ‚ Ğ² messages.html Ğ¸Ğ»Ğ¸ Ğ½Ğµ ÑĞ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¾).';

    mTitle.textContent = name;
    mImg.src = 'cards/' + encodeURI(fn);
    mImg.alt = name;
    mDesc.textContent = desc;
    mPath.textContent = 'cards/' + fn;

    mToggle.textContent = sel.has(fn) ? 'Ğ¡Ğ½ÑÑ‚ÑŒ Ğ²Ñ‹Ğ±Ğ¾Ñ€' : 'Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ';

    modal.classList.add('on');
    modal.setAttribute('aria-hidden','false');
  }

  function closeModal(){
    modal.classList.remove('on');
    modal.setAttribute('aria-hidden','true');
  }

  function step(delta){
    if(!curFn) return;
    const i = lastList.indexOf(curFn);
    if(i<0) return;
    const j = (i + delta + lastList.length) % lastList.length;
    openModal(lastList[j]);
  }

  function render(){
    const term = (q.value||'').trim().toLowerCase();
    const files = CARD_FILES.filter(fn => !term || fn.toLowerCase().includes(term) || pretty(fn).toLowerCase().includes(term));
    lastList = files;
    countEl.textContent = String(files.length);

    grid.innerHTML = files.map(fn => {
      const s = sel.has(fn);
      return `
        <div class="cardTile ${s?'selected':''}" data-fn="${fn}" title="ĞšĞ»Ğ¸Ğº â€” Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ. Shift+ĞºĞ»Ğ¸Ğº â€” Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ.">
          <div class="check">Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾</div>
          <img loading="lazy" src="cards/${fn}" alt="${esc(pretty(fn))}">
          <div class="cap">${esc(pretty(fn))}</div>
        </div>
      `;
    }).join('');

    renderSelected();
  }

  function renderSelected(){
    if(!sel.size){ selList.innerHTML='â€”'; return; }
    selList.innerHTML = [...sel].map(fn => {
      const st = stem(fn);
      const desc = DESC_BY_STEM[st] || 'ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑƒÑ‚Ğ¾Ñ‡Ğ½ÑĞµÑ‚ÑÑ (Ğ½ĞµÑ‚ Ğ² messages.html Ğ¸Ğ»Ğ¸ Ğ½Ğµ ÑĞ¾Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¾).';
      return `
        <div class="item">
          <b>${esc(pretty(fn))}</b>
          <div style="opacity:.85;margin-top:2px;white-space:pre-wrap">${esc(desc)}</div>
          <div style="opacity:.7;margin-top:2px">cards/${esc(fn)}</div>
        </div>
      `;
    }).join('');
  }

  // grid interactions
  grid.addEventListener('click', (e)=>{
    const tile = e.target.closest('.cardTile');
    if(!tile) return;
    const fn = tile.getAttribute('data-fn');

    // Shift-click toggles selection, no modal
    if(e.shiftKey){
      if(sel.has(fn)) sel.delete(fn); else sel.add(fn);
      render();
      return;
    }

    openModal(fn);
  });

  q.addEventListener('input', render);
  clearBtn.addEventListener('click', ()=>{ sel.clear(); render(); });

  // modal interactions
  modal.addEventListener('click', (e)=>{
    if(e.target && e.target.getAttribute && e.target.getAttribute('data-close')==='1') closeModal();
  });
  mToggle.addEventListener('click', ()=>{
    if(!curFn) return;
    if(sel.has(curFn)) sel.delete(curFn); else sel.add(curFn);
    mToggle.textContent = sel.has(curFn) ? 'Ğ¡Ğ½ÑÑ‚ÑŒ Ğ²Ñ‹Ğ±Ğ¾Ñ€' : 'Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ';
    renderSelected();
    // also update tile styling without full re-render
    const tile = grid.querySelector(`.cardTile[data-fn="${CSS.escape(curFn)}"]`);
    if(tile){
      tile.classList.toggle('selected', sel.has(curFn));
    }
  });
  mPrev.addEventListener('click', ()=> step(-1));
  mNext.addEventListener('click', ()=> step(1));

  document.addEventListener('keydown', (e)=>{
    if(!modal.classList.contains('on')) return;
    if(e.key==='Escape') closeModal();
    if(e.key==='ArrowLeft') step(-1);
    if(e.key==='ArrowRight') step(1);
  });

  render();
})();
</script>
</body>
</html>