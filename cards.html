<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>–ë–∞–∑–∞ –∫–∞—Ä—Ç ‚Äî –ö–∞–ø–∏—Ç–∞–ª–∏–∑–º –∏ –ö–æ–º–º—É–Ω–∏–∑–º</title>
  <style>
    :root{
      --bg:#0b0f14; --panel:#101823; --panel2:#0f1620; --text:#e7eef8; --muted:#9ab0c7;
      --line:#213042; --accent:#5fb3ff; --danger:#ff6b6b; --ok:#55d38a;
      --shadow: 0 10px 30px rgba(0,0,0,.35);})();
      --r:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font: 14px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: radial-gradient(1200px 800px at 10% 0%, rgba(95,179,255,.18), transparent 60%),
                  radial-gradient(1000px 700px at 90% 10%, rgba(85,211,138,.14), transparent 55%),
                  var(--bg);})();
      color:var(--text);})();
    }
    .wrap{max-width:980px; margin:0 auto; padding:16px 14px 28px}
    header{display:flex; gap:12px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap; margin-bottom:12px}
    h1{margin:0; font-size:18px}
    .sub{color:var(--muted);})(); margin-top:4px; max-width:78ch}
    .grid{display:grid; grid-template-columns: 1fr; gap:12px}
    .card{
      background: linear-gradient(180deg, rgba(16,24,35,.92), rgba(15,22,32,.88));})();
      border:1px solid var(--line);})();
      border-radius: var(--r);})();
      box-shadow: var(--shadow);})();
      overflow:hidden;
    }
    .card h2{
      margin:0; padding:12px 14px;
      font-size:14px;
      border-bottom:1px solid rgba(33,48,66,.6);})();
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .card .body{padding:14px}
    label{color:var(--muted);})(); font-weight:650; font-size:12px}
    input[type="text"], input[type="number"], select, textarea{
      width:100%;
      background: rgba(8,12,18,.7);})();
      border:1px solid rgba(33,48,66,.9);})();
      color:var(--text);})();
      padding:10px 10px;
      border-radius: 12px;
      outline:none;
    }
    textarea{min-height:120px; resize:vertical}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .row + .row{margin-top:10px}
    .btn{
      appearance:none; border:1px solid rgba(33,48,66,.95);})();
      background: rgba(22,33,50,.7);})();
      color:var(--text);})();
      padding:10px 12px; border-radius: 12px;
      cursor:pointer; font-weight:750;
    }
    .btn:hover{border-color: rgba(95,179,255,.35);})(); background: rgba(22,33,50,.95)}
    .btn.ok{border-color: rgba(85,211,138,.45);})(); background: rgba(85,211,138,.12)}
    .btn.danger{border-color: rgba(255,107,107,.45);})(); background: rgba(255,107,107,.10)}
    .btn.secondary{color:var(--muted);})(); font-weight:750}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius: 999px;
      border:1px solid rgba(33,48,66,.9);})();
      background: rgba(22,33,50,.6);})();
      color:var(--text);})();
      font-weight:750;
    }
    .invgrid{display:grid; grid-template-columns: repeat(3, 1fr);})(); gap:10px}
    @media (max-width: 520px){ .invgrid{grid-template-columns: repeat(2, 1fr);})();} }
    .cell{
      border:1px solid rgba(33,48,66,.9);})();
      background: rgba(8,12,18,.55);})();
      border-radius: 14px;
      padding:10px;
      display:flex; gap:10px; align-items:center; justify-content:space-between;
    }
    .left{display:flex; gap:10px; align-items:center}
    .emo{font-size:18px}
    .name{color:var(--muted);})(); font-weight:750; font-size:12px}
    .log{
      white-space:pre-wrap;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      background: rgba(8,12,18,.65);})();
      border:1px solid rgba(33,48,66,.9);})();
      border-radius: 14px;
      padding:10px;
      max-height:260px;
      overflow:auto;
    }
    .hint{color:var(--muted);})(); font-size:12px}
    .split2{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    @media (max-width: 820px){ .split2{grid-template-columns:1fr} }
    footer{margin-top:12px; color:var(--muted);})(); font-size:12px}
  
    .fab{
      position: fixed;
      right: 14px;
      bottom: 14px;
      z-index: 50;
      width: 52px;
      height: 52px;
      border-radius: 999px;
      border:1px solid rgba(95,179,255,.45);})();
      background: rgba(95,179,255,.14);})();
      color: var(--text);})();
      box-shadow: var(--shadow);})();
      cursor:pointer;
      font-weight: 900;
      font-size: 18px;
    }
    .fab:hover{ background: rgba(95,179,255,.22);})(); }

    .modal{ position: fixed; inset:0; z-index:60; display:none; }
    .modal.open{ display:block; }
    .modal__backdrop{ position:absolute; inset:0; background: rgba(0,0,0,.55);})(); }
    .modal__panel{
      position: relative;
      max-width: 860px;
      margin: 8vh auto 0;
      background: linear-gradient(180deg, rgba(16,24,35,.96), rgba(15,22,32,.96));})();
      border:1px solid rgba(33,48,66,.9);})();
      border-radius: var(--r);})();
      box-shadow: var(--shadow);})();
      overflow:hidden;
    }
    .modal__head{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding: 12px 14px;
      border-bottom:1px solid rgba(33,48,66,.6);})();
    }
    .modal__title{ font-weight: 900; }
    .modal__sub{ color: var(--muted);})(); font-size: 12px; margin-top:2px; }
    .modal__body{ padding: 14px; }
    .memo{ max-height: 52vh; }

    details.acc{
      border:1px solid rgba(33,48,66,.75);})();
      background: rgba(8,12,18,.40);})();
      border-radius: 14px;
      padding: 10px 10px;
      margin-top: 10px;
    }
    details.acc > summary{
      cursor:pointer;
      font-weight: 900;
      color: var(--text);})();
      list-style: none;
      outline:none;
    }
    details.acc > summary::-webkit-details-marker{ display:none; }
    .acc__body{ padding: 10px 2px 2px; }

  
    /* Mobile memo: render as bottom-sheet */
    @media (max-width: 560px){
      .modal__panel{
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        top: auto;
        margin: 0;
        max-width: none;
        width: 100%;
        border-radius: 18px 18px 0 0;
        max-height: 72vh;
      }
      .modal__head{
        position: sticky;
        top: 0;
        background: linear-gradient(180deg, rgba(16,24,35,.98), rgba(15,22,32,.98));})();
        z-index: 1;
      }
      .memo{
        max-height: calc(72vh - 66px);})();
      }
      .modal__head:before{
        content:"";
        display:block;
        width: 44px;
        height: 4px;
        border-radius: 99px;
        margin: 0 auto 10px;
        background: rgba(154,176,199,.35);})();
      }
    }

  
    .dbrow{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      padding:8px 10px;
      border:1px solid rgba(33,48,66,.65);})();
      border-radius: 12px;
      background: rgba(8,12,18,.35);})();
      margin-bottom:8px;
      cursor:pointer;
    }
    .dbrow:hover{ border-color: rgba(95,179,255,.35);})(); background: rgba(8,12,18,.55);})(); }
    .dbrow .l{ display:flex; gap:10px; align-items:center; min-width:0; }
    .dbrow .e{ font-size:18px; }
    .dbrow .t{ font-weight:900; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width: 260px; }
    .dbrow .s{ color: var(--muted);})(); font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width: 360px; }
    .dbrow .r{ display:flex; gap:8px; align-items:center; }
    .tag{
      display:inline-flex; align-items:center;
      padding:4px 8px; border-radius:999px;
      border:1px solid rgba(33,48,66,.75);})();
      background: rgba(22,33,50,.5);})();
      color: var(--muted);})();
      font-size: 12px;
      font-weight: 800;
    }

  
    .topnav{
      position: sticky;
      top: 0;
      z-index: 40;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      padding: 10px 0 12px;
      margin-bottom: 4px;
      backdrop-filter: blur(10px);})();
    }
    .topnav .btn{ padding:8px 10px; border-radius: 999px; text-decoration:none; display:inline-flex; align-items:center; }

  
    .tabpanel{ display:block; }
.topnav{ gap:8px; }
    .topnav .tabbtn.active{
      border-color: rgba(95,179,255,.65);})();
      background: rgba(95,179,255,.16);})();
      color: var(--text);})();
    }

  
    .zone{ animation: fade .15s ease-in; }
    .zone[hidden]{ display:none !important; }
    .topnav .btn.active{
      background: rgba(95,179,255,.35);})();
      border-color: rgba(95,179,255,.75);})();
      color: #e9f3ff;
    }
    @keyframes fade{ from{opacity:.6} to{opacity:1} }

  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä + –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h1>
      <div class="sub">–û–¥–∏–Ω —Ñ–∞–π–ª –¥–ª—è GitHub Pages: –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, –ø–∞—Ä—Å–µ—Ä –ø–æ—Å—Ç–æ–≤ A/B, –ø—Ä–∞–≤–∏–ª–∞ –∏ –º–µ—Å—Ç–æ –ø–æ–¥ –±–∞–∑—É –∫–∞—Ä—Ç. –ü—Ä–æ—Ñ–∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (localStorage).</div>
    </div>
  </header>


    
  <nav class="topnav" aria-label="–†–∞–∑–¥–µ–ª—ã">
    <a class="btn secondary tabbtn" href="calc.html">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a>
    <a class="btn secondary tabbtn" href="rules.html">–ü—Ä–∞–≤–∏–ª–∞</a>
    <a class="btn secondary tabbtn" href="cards.html">–ë–∞–∑–∞ –∫–∞—Ä—Ç</a>
  </nav>



  <!-- Always-available memo -->
  <button class="fab" id="memoBtn" aria-label="–ü–∞–º—è—Ç–∫–∞" onclick="window.openMemo && window.openMemo()">üìå</button>

  <div class="modal" id="memoModal" aria-hidden="true">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="memoTitle">
      <div class="modal__head">
        <div>
          <div class="modal__title" id="memoTitle">üìå –ü–∞–º—è—Ç–∫–∞ –∏–≥—Ä–æ–∫–∞</div>
          <div class="modal__sub">–í—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ –∏–∑ –ª—é–±–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ (–Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–Ω–∏–∑—É)</div>
        </div>
        <button class="btn secondary" data-close="1">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div class="modal__body">
        <div class="log memo" id="memoText"></div>
      </div>
    </div>
  </div>


  <div class="grid">

<div class="tabpanel" data-tabpanel="cardsdb">
<div class="zone" id="zone-db" hidden>
<section class="card" id="cardsdb">
      <h2>
        <span>üóÇÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–∞—Ä—Ç–∞–º</span>
        <span class="row">
          <span class="pill">–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã</span>
        </span>
      </h2>
      <div class="body">
        <div class="row">
          <div style="flex:1; min-width:240px">
            <label>–ü–æ–∏—Å–∫</label>
            <input id="dbQ" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ —ç–º–æ–¥–∑–∏ (–Ω–∞–ø—Ä.: –î–∂–æ–∫–µ—Ä, üßø, –ë–∞–Ω–∫, üö®)"/>
          </div>
          


    <div class="hint">–≠–º–æ–¥–∑–∏+—á–∏—Å–ª–æ –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ.</div>
          </div>
        </div>

        <div class="row">
          <div style="flex:1">
            <label>–†–µ—Å—É—Ä—Å—ã</label>
            <div class="invgrid" id="inv"></div>
          </div>
        </div>

        <div class="row">
          <button class="btn ok" id="up">‚¨ÜÔ∏è –°–æ–±—Ä–∞—Ç—å (–ª–µ—Å—Ç–Ω–∏—Ü–∞)</button>
          <button class="btn" id="down">‚¨áÔ∏è –†–∞–∑–æ–±—Ä–∞—Ç—å (–ª–µ—Å—Ç–Ω–∏—Ü–∞)</button>
          <button class="btn" id="split">üîò –†–∞–∑–¥–µ–ª–∏—Ç—å ‚òëÔ∏è‚Üíüîò√ó2</button>
          <button class="btn" id="tv">üßø –¢–í: ‚¨úÔ∏è+üîò‚Üíüßø</button>
          <button class="btn danger" id="reset">–°–±—Ä–æ—Å</button>
        </div>

        <div class="row">
          <span class="pill">–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç: <span id="eq">0</span> ‚òëÔ∏è</span>
          <span class="pill">–õ–µ—Å—Ç–Ω–∏—Ü–∞: <span id="lad">‚Äî</span></span>
          <span class="pill">–°–µ–π—á–∞—Å: <span id="short">‚Äî</span></span>
        </div>

        <div class="row">
          <div style="flex:1; min-width:260px">
            <label>–õ–æ–≥</label>
            <div class="log" id="log">‚Äî</div>
          </div>
        </div>

        <div class="hint">–ö–æ–º–∏—Å—Å–∏—é –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤ —á–∞—Ç–µ –±–∞–Ω–∫–∞. –¢–í: üîò —Å–≥–æ—Ä–∞–µ—Ç –ø—Ä–∏ —Å–±–æ—Ä–∫–µ/—Ä–∞–∑–±–æ—Ä–∫–µ.</div>
      </div>
    </section>
</div>
</div>

    <details open class="acc">
          <summary>üéØ –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è</summary>
          <div class="acc__body">
            <div class="hint">
              –ò–≥—Ä–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤ —Ä–∞–º–∫–∞—Ö –æ–Ω–ª–∞–π–Ω-—Å—Ç—Ä–∏–º–æ–≤. –ò–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –∫–∞—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç: –Ω–∞–∫–∞–∑—ã–≤–∞—Ç—å/–∑–∞—â–∏—â–∞—Ç—å—Å—è, –≤–ª–∏—è—Ç—å –Ω–∞ —ç—Ñ–∏—Ä, —Å—Ç—Ä–æ–∏—Ç—å –±–∞–Ω–∫–∏/—Ö—Ä–∞–º—ã, –∫–æ–Ω–∫—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞—Ç—å. –ö–∞—Ä—Ç—ã –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å, —Å–æ–±–∏—Ä–∞—Ç—å, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å, –ø–æ–∫—É–ø–∞—Ç—å –∏ —Ç–µ—Ä—è—Ç—å.
            </div>
          </div>
        </details>

        <details class="acc">
          <summary>üßæ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –∫–∞—Ä—Ç</summary>
          <div class="acc__body">
            <div class="log">
1) –û–±—ã—á–Ω—ã–µ (üÄÑÔ∏è): üü¶ üü© ‚¨úÔ∏è üüß üíé ‚Äî —Å–Ω—è—Ç–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π / –º–æ–¥–µ—Ä–∞—Ü–∏—è / –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
2) –ê–∫—Ç–∏–≤–∞—Ü–∏–∏ (üé¥): üÉè ‚òÆÔ∏è üö® ‚ìÇÔ∏è ‚ôéÔ∏è ‚Äî –±–∞—Ç–ª—ã / –∏–º–º—É–Ω–∏—Ç–µ—Ç—ã / –∫—Ä–∞–∂–∏ / –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
3) –ù–∞—Ä—É—à–µ–Ω–∏—è (üßß): üü™ üü® üü• ‚¨õÔ∏è üü´ ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è / –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è / –±–∞–Ω—ã
4) –û–ø–∞—Å–Ω—ã–µ (üì±): ‚ö´Ô∏è üí£ üåã ü•∑ ‚Äî –∂—ë—Å—Ç–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–æ–±–Ω—É–ª–µ–Ω–∏–µ/—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ/–∫—Ä–∞–∂–∏)
5) –°—É–ø–µ—Ä-–∫–∞—Ä—Ç—ã (ü™ü): üè≥Ô∏è‚Äçüåà üèß üõê ü™Ω üé∞ ‚Äî –∏–º–º—É–Ω–∏—Ç–µ—Ç—ã / –≥–µ–Ω–µ—Ä–∞—Ü–∏—è / –∑–∞—â–∏—Ç–∞ / –∫—Ä—É–ø–Ω—ã–µ –±–æ–Ω—É—Å—ã
6) –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: üßø ‚≠ïÔ∏è üé≤ ‚ô¶Ô∏è ‚Äî –∫–æ–ª—ë—Å–∞ –∏ –º–Ω–æ–∂–∏—Ç–µ–ª–∏
            </div>
          </div>
        </details>

        <details class="acc">
          <summary>‚úÖ –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–∞—Ä—Ç—ã</summary>
          <div class="acc__body">
            <div class="log">
‚Äî –î–æ–Ω–∞—Ç (–ø—Ä–æ–¥–ª–µ–Ω–∏–µ —ç—Ñ–∏—Ä–∞): —Ç–æ–ø-5 –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ –ø–æ–ª—É—á–∞—é—Ç –∫–∞—Ä—Ç—ã –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è
‚Äî –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: —Ç–æ–ø –ø–æ –ø—Ä–æ—Å–º–æ—Ç—Ä—É / –±–∞—Ç–ª–∞–º / –ª–∏–≥–∞–º
‚Äî –ö–æ–ª—ë—Å–∞: üßø –¢–í (–¥–æ 3 –≤ –¥–µ–Ω—å), ‚≠ïÔ∏è –∫–æ–ª–µ—Å–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (1 –≤ –¥–µ–Ω—å)
‚Äî –°–±–æ—Ä–∫–∞: –∫–æ–º–±–∏–Ω–∏—Ä—É–π –∫–∞—Ä—Ç—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª–µ–µ —Å–∏–ª—å–Ω—ã–µ
‚Äî –ü–æ–∫—É–ø–∫–∞/–≤—ã–¥–∞—á–∞ –≤–µ–¥—É—â–∏–º: —Å–æ–±—ã—Ç–∏—è, —Ñ–ª–µ—à–º–æ–±—ã, —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏
            </div>
          </div>
        </details>

        <details class="acc">
          <summary>‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ª–∏–º–∏—Ç—ã</summary>
          <div class="acc__body">
            <div class="log">
‚Äî –ù–µ–ª—å–∑—è –Ω–∞–∫–∞–∑—ã–≤–∞—Ç—å: —Ç–æ–ø-3 —Å–ø–æ–Ω—Å–æ—Ä–æ–≤, –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤, –∏–≥—Ä–æ–∫–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞—â–∏—Ç–æ–π
‚Äî –õ–∏–º–∏—Ç—ã –ø–µ—Ä–µ–¥–∞—á: 7 –∫–∞—Ä—Ç –∏ 7 üßø –≤ –¥–µ–Ω—å (–æ–±—â–∏–π), 3 –∫–∞—Ä—Ç—ã –∏ 3 üßø –Ω–∞ –∏–≥—Ä–æ–∫–∞; üßø –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏
‚Äî –õ–∏–º–∏—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–π: –Ω–µ –±–æ–ª–µ–µ 3 –∫–∞—Ä—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤ –¥–µ–Ω—å
‚Äî –°–≥–æ—Ä–∞–Ω–∏–µ: –∫–∞—Ä—Ç—ã –º–æ–≥—É—Ç —Å–≥–æ—Ä–∞—Ç—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–æ–¥–ª–µ–Ω–∏—è (–µ—Å–ª–∏ —Ç–∞–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ –≤–∫–ª—é—á–µ–Ω–æ –≤–µ–¥—É—â–∏–º)
‚Äî –ê–≤–∞—Ç–∞—Ä–∫–∞: –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–∞—Ä—Ç —ç—Ñ—Ñ–µ–∫—Ç –∞–∫—Ç–∏–≤–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –∫–∞—Ä—Ç–∞ —Å—Ç–æ–∏—Ç –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫–µ
            </div>
          </div>
        </details>

        <details class="acc">
          <summary>üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –∏ –∏–º–º—É–Ω–∏—Ç–µ—Ç—ã</summary>
          <div class="acc__body">
            <div class="log">
üè≥Ô∏è‚Äçüåà –†–∞–¥—É–∂–Ω–∞—è ‚Äî –∏–º–º—É–Ω–∏—Ç–µ—Ç –∫ –∫–∞—Ä—Ç–∞–º –Ω–∞—Ä—É—à–µ–Ω–∏–π –Ω–∞ –Ω–µ–¥–µ–ª—é (–∫—Ä–æ–º–µ –≤–µ–¥—É—â–µ–≥–æ)
‚òÆÔ∏è –ü–∞—Ü–∏—Ñ–∏–∫ ‚Äî —Å–Ω–∏–º–∞–µ—Ç üü´ –∏ üü•, –∏–º–º—É–Ω–∏—Ç–µ—Ç –∫ –Ω–∏–º –Ω–∞ 24 —á–∞—Å–∞
ü™Ω –ê–Ω–≥–µ–ª ‚Äî –ø–æ–ª–Ω—ã–π –∏–º–º—É–Ω–∏—Ç–µ—Ç + –º–æ–∂–µ—Ç —Å–Ω–∏–º–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏—Ö
üõê –•—Ä–∞–º / üèß –ë–∞–Ω–∫ / üóÑ –°–µ–π—Ñ ‚Äî –∑–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–æ–≤/–∫–∞—Ä—Ç
            </div>
          </div>
        </details>

        <details class="acc">
          <summary>üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–æ–≤–∏—á–∫–∞ (–∫–æ—Ä–æ—Ç–∫–æ)</summary>
          <div class="acc__body">
            <div class="log">
1) –ù–∞—á–Ω–∏ —Å –º–∞–ª–æ–≥–æ: –ø—Ä–æ–¥–ª–µ–≤–∞–π —ç—Ñ–∏—Ä / –∫—Ä—É—Ç–∏ üßø
2) –°–æ–±–∏—Ä–∞–π –∑–∞—â–∏—Ç—É: 3‚òëÔ∏è=üü¶, 2üü¶=üü©, 2üü©=‚¨úÔ∏è
3) –ù–µ —Ç—Ä–∞—Ç—å –æ–ø–∞—Å–Ω—ã–µ –∫–∞—Ä—Ç—ã –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è
4) –°–ø—Ä–∞—à–∏–≤–∞–π —É –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤/–≤–µ–¥—É—â–µ–≥–æ
            </div>
          </div>
        </details>
      </div>
    </section>
</div>
</div>

    
    <div style="min-width:220px">
            <label>–¢–∏–ø</label>
            <select id="dbType">
              <option value="">–í—Å–µ</option>
            </select>
          </div>
          <div style="min-width:160px">
            <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
            <select id="dbSort">
              <option value="name">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
              <option value="type">–ü–æ —Ç–∏–ø—É</option>
              <option value="value">–ü–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (‚òëÔ∏è)</option>
            </select>
          </div>
        </div>

        <div class="row">
          <span class="pill">–ù–∞–π–¥–µ–Ω–æ: <span id="dbCount">0</span></span>
          <span class="pill">–ö–ª–∏–∫ –ø–æ —Å—Ç—Ä–æ–∫–µ ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–ø—Ä–∞–≤–∞</span>
        </div>

        <div class="row" style="align-items:stretch">
          <div style="flex:1; min-width:300px">
            <label>–°–ø–∏—Å–æ–∫</label>
            <div class="log" id="dbList" style="max-height:380px"></div>
          </div>
          <div style="flex:1; min-width:300px">
            <label>–ö–∞—Ä—Ç–æ—á–∫–∞</label>
            <div class="log" id="dbCard" style="max-height:380px">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –≤ —Å–ø–∏—Å–∫–µ.</div>
          </div>
        </div>

        <div class="hint">
          –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —á–∞—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∏–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ–¥—É—â–µ–≥–æ/–∏–≤–µ–Ω—Ç–æ–≤. –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ ‚òëÔ∏è —É–∫–∞–∑–∞–Ω–∞ –¥–ª—è –≤–∞–ª—é—Ç—ã; –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äî –µ—Å–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª–∞–º–∏, –∏–Ω–∞—á–µ ‚Äú‚Äî‚Äù.
        </div>
      </div>
    </section>
</div>
</div>



    <footer>–õ–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞. GitHub Pages: –ø–æ–ª–æ–∂–∏—Ç–µ —Ñ–∞–π–ª –∫–∞–∫ index.html.</footer>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  "use strict";

  // Basic runtime error surface
  function showFatal(err){
    try{
      const msg = (err && (err.stack || err.message)) ? String(err.stack || err.message) : String(err);})();
      const box = document.createElement("pre");})();
      box.textContent = "JS –æ—à–∏–±–∫–∞:\n" + msg;
      box.style.cssText = "white-space:pre-wrap;max-width:980px;margin:12px auto;padding:12px;border:1px solid rgba(255,107,107,.65);})();border-radius:14px;background:rgba(20,10,10,.55);})();color:#ffd7d7;";
      document.body.prepend(box);})();
    }catch(_){ /* noop */ }
  }

  window.addEventListener("error", (e)=> showFatal(e.error || e.message));})();
  window.addEventListener("unhandledrejection", (e)=> showFatal(e.reason));})();


  const MEMO = '‚Äî –í—Å—ë —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ ‚òëÔ∏è (—Å–µ—Ä—ã—Ö)\n‚Äî –õ–µ—Å—Ç–Ω–∏—Ü–∞ –≤–∞–ª—é—Ç:\n  ‚òëÔ∏è(1) ‚Üí üü¶(3) ‚Üí üü©(6) ‚Üí ‚¨úÔ∏è(12) ‚Üí üüß(24) ‚Üí üíé(48) ‚Üí üö®(144)\n  (3 ‚òëÔ∏è = üü¶ ¬∑ 2 üü¶ = üü© ¬∑ 2 üü© = ‚¨úÔ∏è ¬∑ 2 ‚¨úÔ∏è = üüß ¬∑ 2 üüß = üíé ¬∑ 3 üíé = üö®)\n‚Äî üîò –ö–æ–º–∏—Å—Å–∏—è –Ω—É–∂–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∫–∞—Ä—Ç –∏ –¢–í, –≤—ã–¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –ë–∞–Ω–∫, üîò —Å–≥–æ—Ä–∞–µ—Ç\n‚Äî üßø –¢–í: ‚¨úÔ∏è + üîò ‚Üí üßø | –¢–í –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏\n‚Äî –õ–∏–º–∏—Ç—ã: 3 –∞–∫—Ç–∏–≤–∞—Ü–∏–∏/–¥–µ–Ω—å ¬∑ –ø–µ—Ä–µ–¥–∞—á–∞: 3 –∫–∞—Ä—Ç—ã + 3 üßø –Ω–∞ –∏–≥—Ä–æ–∫–∞, 7/7 –≤—Å–µ–≥–æ\n‚Äî –ü–µ—Ä–µ–¥–∞—á–∞: –í–ò–ü —á–∞—Ç / –û–±—â–∏–π —á–∞—Ç / –õ–° –≤–µ–¥—É—â–µ–º—É\n‚Äî –°–±–æ—Ä–∫–∞/—Ä–∞–∑–±–æ—Ä–∫–∞: –≤—Å–µ–≥–¥–∞ –ø–∏—à–∏—Ç–µ, —á—Ç–æ –∏–∑ —á–µ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å–æ–±–∏—Ä–∞–µ—Ç–µ/—Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ\n\nüëâ –î—É–º–∞–π –≤ ‚òëÔ∏è ‚Äî –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤—Ç–æ—Ä–∏—á–Ω–æ';

  const CARDS = [{"emoji": "‚òëÔ∏è", "name": "–°–µ—Ä–∞—è", "type": "–í–∞–ª—é—Ç–∞", "summary": "–ë–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–∏.", "value": 1, "rules": "–í—Å—ë —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ ‚òëÔ∏è."}, {"emoji": "üü¶", "name": "–°–∏–Ω—è—è", "type": "–í–∞–ª—é—Ç–∞", "summary": "–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç 3 —Å–µ—Ä—ã—Ö.", "value": 3, "craft": "3‚òëÔ∏è ‚Üí üü¶; —Ä–∞–∑–±–æ—Ä: üü¶ ‚Üí 3‚òëÔ∏è."}, {"emoji": "üü©", "name": "–ó–µ–ª—ë–Ω–∞—è", "type": "–í–∞–ª—é—Ç–∞", "summary": "–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç 6 —Å–µ—Ä—ã—Ö.", "value": 6, "craft": "2üü¶ ‚Üí üü©; —Ä–∞–∑–±–æ—Ä: üü© ‚Üí 2üü¶."}, {"emoji": "‚¨úÔ∏è", "name": "–ë–µ–ª–∞—è", "type": "–í–∞–ª—é—Ç–∞", "summary": "–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç 12 —Å–µ—Ä—ã—Ö.", "value": 12, "craft": "2üü© ‚Üí ‚¨úÔ∏è; —Ä–∞–∑–±–æ—Ä: ‚¨úÔ∏è ‚Üí 2üü©."}, {"emoji": "üüß", "name": "–ó–æ–ª–æ—Ç–∞—è", "type": "–í–∞–ª—é—Ç–∞", "summary": "–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç 24 —Å–µ—Ä—ã—Ö.", "value": 24, "craft": "2‚¨úÔ∏è ‚Üí üüß; —Ä–∞–∑–±–æ—Ä: üüß ‚Üí 2‚¨úÔ∏è."}, {"emoji": "üíé", "name": "–ò–∑—É–º—Ä—É–¥–Ω–∞—è", "type": "–í–∞–ª—é—Ç–∞", "summary": "–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç 48 —Å–µ—Ä—ã—Ö.", "value": 48, "craft": "2üüß ‚Üí üíé; —Ä–∞–∑–±–æ—Ä: üíé ‚Üí 2üüß."}, {"emoji": "üö®", "name": "–†—É–±–∏–Ω–æ–≤–∞—è", "type": "–í–∞–ª—é—Ç–∞/–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç 144 —Å–µ—Ä—ã—Ö; –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö —Ç–∞–∫–∂–µ –∫–∞—Ä—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (—Å–æ–≤–µ–¥—É—â–∏–π/–ø—Ä–æ–¥–ª–µ–Ω–∏–µ).", "value": 144, "craft": "3üíé ‚Üí üö®; —Ä–∞–∑–±–æ—Ä: üö® ‚Üí 3üíé."}, {"emoji": "üîò", "name": "–ö–æ–º–∏—Å—Å–∏—è", "type": "–°–ª—É–∂–µ–±–Ω–∞—è", "summary": "–ù—É–∂–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∫–∞—Ä—Ç –∏ –æ–ø–µ—Ä–∞—Ü–∏–π –¢–í; –≤—ã–¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –ë–∞–Ω–∫; —Å–≥–æ—Ä–∞–µ—Ç.", "value": null, "rules": "1‚òëÔ∏è = 2üîò (–∫–æ–Ω–≤–µ—Ä—Å–∏—è). –¢–í –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏."}, {"emoji": "üßø", "name": "–¢–í –∫–æ–ª–µ—Å–æ", "type": "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç", "summary": "–ö–æ–ª–µ—Å–æ/—Ä–µ—Å—É—Ä—Å –¥–ª—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π; –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏.", "value": null, "craft": "‚¨úÔ∏è + üîò ‚Üí üßø; —Ä–∞–∑–±–æ—Ä: üßø + üîò ‚Üí ‚¨úÔ∏è (üîò —Å–≥–æ—Ä–∞–µ—Ç)."}, {"emoji": "‚≠ïÔ∏è", "name": "–ö–æ–ª–µ—Å–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏", "type": "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç", "summary": "–ö—Ä—É—Ç–∏—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—É–ø–µ—Ä-–∫–∞—Ä—Ç/–∞–∫—Ç–∏–≤–∞—Ü–∏–π (–ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –≤–µ–¥—É—â–µ–≥–æ).", "value": null}, {"emoji": "üé≤", "name": "–ö–æ—Å—Ç—å", "type": "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç", "summary": "–£–º–Ω–æ–∂–∞–µ—Ç –æ–±—ã—á–Ω—ã–µ –∫–∞—Ä—Ç—ã (–ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –≤–µ–¥—É—â–µ–≥–æ).", "value": null}, {"emoji": "‚ô¶Ô∏è", "name": "–†—É–±–∏–Ω–æ–≤–∞—è –∫–æ—Å—Ç—å", "type": "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç", "summary": "–£–º–Ω–æ–∂–∞–µ—Ç —Ä—É–±–∏–Ω–æ–≤—ã–µ –∫–∞—Ä—Ç—ã (–ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –≤–µ–¥—É—â–µ–≥–æ).", "value": null}, {"emoji": "üÉè", "name": "–î–∂–æ–∫–µ—Ä", "type": "–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–ë–∞—Ç–ª-–∫–∞—Ä—Ç–∞; –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Ä—É—à–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Ç–∏–≤ –∏–≥—Ä–æ–∫–∞ —Å –î–∂–æ–∫–µ—Ä–æ–º (–ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º).", "value": null, "craft": "üüß + ‚¨úÔ∏è + üü© + ‚òëÔ∏è = üÉè"}, {"emoji": "‚òÆÔ∏è", "name": "–ü–∞—Ü–∏—Ñ–∏–∫", "type": "–ê–∫—Ç–∏–≤–∞—Ü–∏—è/–ó–∞—â–∏—Ç–∞", "summary": "–°–Ω–∏–º–∞–µ—Ç üü´ –∏ üü•, –¥–∞—ë—Ç –∏–º–º—É–Ω–∏—Ç–µ—Ç –∫ –Ω–∏–º –Ω–∞ 24 —á–∞—Å–∞.", "value": null, "craft": "‚¨úÔ∏è + üü© + üü¶ + üìú = ‚òÆÔ∏è"}, {"emoji": "‚ìÇÔ∏è", "name": "–ú–∞–≥–Ω–∏—Ç", "type": "–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–ö—Ä–∞–¥—ë—Ç –∫–∞—Ä—Ç—É —É –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞.", "value": null}, {"emoji": "‚ôéÔ∏è", "name": "–°—Ç—Ä–∞—à–Ω—ã–π —Å—É–¥", "type": "–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–ö—Ä–∞–¥—ë—Ç –≤—Å–µ –∫–∞—Ä—Ç—ã —É –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞.", "value": null}, {"emoji": "üí†", "name": "–ó–∞–º–æ—Ä–æ–∑–∫–∞", "type": "–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–°—Ç–æ–ø-—ç—Ñ—Ñ–µ–∫—Ç (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "üö® ‚Üí üí† (–µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–æ –≤–∫–ª—é—á–µ–Ω–æ)."}, {"emoji": "üÖæÔ∏è", "name": "–û–±–Ω—É–ª–µ–Ω–∏–µ", "type": "–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å/–æ–±–Ω—É–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "üüß + ‚¨úÔ∏è + üöæ + ‚òÆÔ∏è + üü© + üü¶ + ‚òëÔ∏è = üÖæÔ∏è"}, {"emoji": "üü™", "name": "–†–æ–∑–æ–≤–∞—è", "type": "–ù–∞—Ä—É—à–µ–Ω–∏–µ", "summary": "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö: —Å–Ω–∏–º–∞–µ—Ç—Å—è —Å–µ—Ä–æ–π ‚òëÔ∏è).", "value": null}, {"emoji": "üü®", "name": "–ñ—ë–ª—Ç–∞—è", "type": "–ù–∞—Ä—É—à–µ–Ω–∏–µ", "summary": "–°–ø—É—Å–∫ –≤–Ω–∏–∑ –Ω–∞ 30 –º–∏–Ω—É—Ç.", "value": null}, {"emoji": "üü•", "name": "–ö—Ä–∞—Å–Ω–∞—è", "type": "–ù–∞—Ä—É—à–µ–Ω–∏–µ", "summary": "–ó–∞–ø—Ä–µ—Ç –≤ –≥–æ—Å—Ç–µ–≤–æ–π –¥–æ –∫–æ–Ω—Ü–∞ —ç—Ñ–∏—Ä–∞.", "value": null}, {"emoji": "‚¨õÔ∏è", "name": "–ß—ë—Ä–Ω–∞—è", "type": "–ù–∞—Ä—É—à–µ–Ω–∏–µ", "summary": "–ë–∞–Ω –Ω–∞ 1 –Ω–µ–¥–µ–ª—é.", "value": null}, {"emoji": "üü´", "name": "–ö–æ—Ä–∏—á–Ω–µ–≤–∞—è", "type": "–ù–∞—Ä—É—à–µ–Ω–∏–µ", "summary": "–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —á–∞—Ç–∞ –¥–æ –∫–æ–Ω—Ü–∞ —ç—Ñ–∏—Ä–∞.", "value": null}, {"emoji": "‚ö´Ô∏è", "name": "–ë–∞–Ω–∫—Ä–æ—Ç", "type": "–û–ø–∞—Å–Ω–∞—è", "summary": "–ó–∞–±–∏—Ä–∞–µ—Ç –≤—Å–µ –≤–∞—à–∏ –∫–∞—Ä—Ç—ã.", "value": null}, {"emoji": "üí£", "name": "–≠–∫—Å—Ç–µ—Ä–º–∏–Ω–∞—Ç—É—Å", "type": "–û–ø–∞—Å–Ω–∞—è", "summary": "–ó–∞–≤–µ—Ä—à–∞–µ—Ç —ç—Ñ–∏—Ä, –¥–∞—ë—Ç –æ–±–Ω—É–ª–µ–Ω–∏–µ.", "value": null}, {"emoji": "üåã", "name": "–ü—Ä–µ–∏—Å–ø–æ–¥–Ω—è—è", "type": "–û–ø–∞—Å–Ω–∞—è", "summary": "–£–Ω–∏—á—Ç–æ–∂–∞–µ—Ç –∫–∞—Ä—Ç—ã –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤.", "value": null}, {"emoji": "ü•∑", "name": "–ì—Ä–∞–±–∏—Ç–µ–ª–∏", "type": "–û–ø–∞—Å–Ω–∞—è", "summary": "–ö—Ä–∞–¥—ë—Ç –∫–∞—Ä—Ç—ã –∏–∑ —Å–∞–º–æ–≥–æ –±–æ–≥–∞—Ç–æ–≥–æ –±–∞–Ω–∫–∞.", "value": null}, {"emoji": "üè≥Ô∏è‚Äçüåà", "name": "–†–∞–¥—É–∂–Ω–∞—è", "type": "–°—É–ø–µ—Ä-–∫–∞—Ä—Ç–∞/–ó–∞—â–∏—Ç–∞", "summary": "–ò–º–º—É–Ω–∏—Ç–µ—Ç –∫–æ –≤—Å–µ–º –∫–∞—Ä—Ç–∞–º –Ω–∞—Ä—É—à–µ–Ω–∏–π –Ω–∞ –Ω–µ–¥–µ–ª—é (–∫—Ä–æ–º–µ –≤–µ–¥—É—â–µ–≥–æ).", "value": null}, {"emoji": "üèß", "name": "–ë–∞–Ω–∫", "type": "–°—É–ø–µ—Ä-–∫–∞—Ä—Ç–∞/–û–±—ä–µ–∫—Ç", "summary": "–•—Ä–∞–Ω–∏—Ç –∏ —É–º–Ω–æ–∂–∞–µ—Ç –∫–∞—Ä—Ç—ã (–ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –≤–µ–¥—É—â–µ–≥–æ).", "value": null}, {"emoji": "üõê", "name": "–•—Ä–∞–º", "type": "–°—É–ø–µ—Ä-–∫–∞—Ä—Ç–∞/–û–±—ä–µ–∫—Ç", "summary": "–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ —Ä–∞–∑–¥–∞—ë—Ç –∫–∞—Ä—Ç—ã; –∑–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ (–ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –≤–µ–¥—É—â–µ–≥–æ).", "value": null}, {"emoji": "ü™Ω", "name": "–ê–Ω–≥–µ–ª", "type": "–°—É–ø–µ—Ä-–∫–∞—Ä—Ç–∞/–ó–∞—â–∏—Ç–∞", "summary": "–ü–æ–ª–Ω—ã–π –∏–º–º—É–Ω–∏—Ç–µ—Ç + –º–æ–∂–µ—Ç —Å–Ω–∏–º–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏—Ö.", "value": null}, {"emoji": "üé∞", "name": "–î–∂–µ–∫–ø–æ—Ç", "type": "–°—É–ø–µ—Ä-–∫–∞—Ä—Ç–∞", "summary": "–ù–∞–±–æ—Ä –∏–∑ 12 —Ä–µ–¥–∫–∏—Ö –∫–∞—Ä—Ç –∏ –∫–æ–ª—ë—Å (–ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º).", "value": null}, {"emoji": "üóÑ", "name": "–°–µ–π—Ñ", "type": "–°—É–ø–µ—Ä-–∫–∞—Ä—Ç–∞/–ó–∞—â–∏—Ç–∞", "summary": "–ó–∞—â–∏—â–∞–µ—Ç –∫–∞—Ä—Ç—ã –æ—Ç –∫—Ä–∞–∂ –≤ –±–∞–Ω–∫–µ (—É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ –∑–∞—â–∏—Ç–µ).", "value": null}, {"emoji": "üìú", "name": "–°–≤–∏—Ç–æ–∫", "type": "–ö—Ä–∞—Ñ—Ç/–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–ë–∞–∑–æ–≤–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "üü© + üü¶ + ‚òëÔ∏è = üìú"}, {"emoji": "üöæ", "name": "–ê–Ω—Ç–∏—ç–∫—Ä–∞–Ω", "type": "–ö—Ä–∞—Ñ—Ç/–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–ó–∞—â–∏—Ç–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "üü¶ + ‚òëÔ∏è√ó2 = üöæ"}, {"emoji": "üéπ", "name": "–ú—É–∑—ã–∫–∞", "type": "–ö—Ä–∞—Ñ—Ç/–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–≠—Ñ—Ñ–µ–∫—Ç/–º—É–∑—ã–∫–∞ (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "‚¨úÔ∏è + ‚òëÔ∏è = üéπ"}, {"emoji": "üé¶", "name": "–ö–æ–Ω—Ç–µ–Ω—Ç", "type": "–ö—Ä–∞—Ñ—Ç/–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–í–∏–¥–µ–æ/–∫–æ–Ω—Ç–µ–Ω—Ç-—ç—Ñ—Ñ–µ–∫—Ç (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "üüß + ‚¨úÔ∏è + ‚òëÔ∏è = üé¶"}, {"emoji": "ü™ì", "name": "–¢–æ–ø–æ—Ä", "type": "–ö—Ä–∞—Ñ—Ç/–ê–∫—Ç–∏–≤–∞—Ü–∏—è", "summary": "–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "üíé + ‚¨úÔ∏è = ü™ì"}, {"emoji": "üåà", "name": "–†–∞–¥—É–≥–∞", "type": "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è/–ö—Ä–∞—Ñ—Ç", "summary": "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞ (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "üíé + üüß√ó3 + ‚¨úÔ∏è + ‚òÆÔ∏è + üÉè + üü© + üü¶ + üìú + ‚òëÔ∏è = üåà"}, {"emoji": "üî≤", "name": "–ß—ë—Ä–Ω–æ-–±–µ–ª–∞—è", "type": "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è/–ö—Ä–∞—Ñ—Ç", "summary": "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞ (–ø–æ –≤–∞—à–µ–π –∫—Ä–∞—Ñ—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–µ).", "value": null, "craft": "üö® + üíé√ó3 + üüß + ‚¨úÔ∏è + üÉè + üü© + üü¶ + üöæ + ‚òëÔ∏è = üî≤"}];

  // ---------- Constants ----------
  const META = {
    gray:{e:"‚òëÔ∏è", n:"–°–µ—Ä–∞—è"}, blue:{e:"üü¶", n:"–°–∏–Ω—è—è"}, green:{e:"üü©", n:"–ó–µ–ª—ë–Ω–∞—è"}, white:{e:"‚¨úÔ∏è", n:"–ë–µ–ª–∞—è"},
    gold:{e:"üüß", n:"–ó–æ–ª–æ—Ç–∞—è"}, emerald:{e:"üíé", n:"–ò–∑—É–º—Ä—É–¥–Ω–∞—è"}, ruby:{e:"üö®", n:"–†—É–±–∏–Ω–æ–≤–∞—è"},
    fee:{e:"üîò", n:"–ö–æ–º–∏—Å—Å–∏—è"}, tv:{e:"üßø", n:"–¢–í –∫–æ–ª–µ—Å–æ"},
  };
  const QUICK = ["gray","blue","green","white","gold","emerald","ruby","fee","tv"];
  const EMOJI_TO_ID = (function(){
    const m = Object.create(null);})();
    for (const [id, v] of Object.entries(META)) m[v.e] = id;
    m["‚¨ú"] = "white";
    return m;
  })();})();

  const LS_KEY = "cards_profiles_v1";

  // ---------- Helpers ----------
  const $ = (sel, root=document) => root.querySelector(sel);})();
  function clamp0(n){ n=Number(n);})(); if(!Number.isFinite(n)) return 0; return Math.max(0, Math.floor(n));})(); }
  function cloneInv(inv){ const o=Object.create(null);})(); for(const k of Object.keys(inv||{})){ const v=clamp0(inv[k]);})(); if(v) o[k]=v; } return o; }
  function getNum(inv,id){ return clamp0(inv && inv[id]);})(); }
  function setNum(inv,id,v){ inv[id]=clamp0(v);})(); if(!inv[id]) delete inv[id]; }
  function normalizeName(name){ return String(name||"").replace(/\s+/g," ").trim();})(); }

  function sbGrayValue(inv){
    const g = Number(inv.gray||0), b = Number(inv.blue||0), gr = Number(inv.green||0);})();
    const w = Number(inv.white||0), go = Number(inv.gold||0), e = Number(inv.emerald||0), r = Number(inv.ruby||0);})();
    return g + b*3 + gr*6 + w*12 + go*24 + e*48 + r*144;
  }
  function ladderFromGray(grayTotal){
    let t = Math.max(0, Math.floor(Number(grayTotal)||0));})();
    const out = { ruby:0, emerald:0, gold:0, white:0, green:0, blue:0, gray:0 };
    out.ruby = Math.floor(t / 144);})(); t %= 144;
    out.emerald = Math.floor(t / 48);})(); t %= 48;
    out.gold = Math.floor(t / 24);})(); t %= 24;
    out.white = Math.floor(t / 12);})(); t %= 12;
    out.green = Math.floor(t / 6);})(); t %= 6;
    out.blue = Math.floor(t / 3);})(); t %= 3;
    out.gray = t;
    return out;
  }
  function fmtLadder(l){
    const parts = [];
    if (l.ruby) parts.push(`üö®${l.ruby}`);})();
    if (l.emerald) parts.push(`üíé${l.emerald}`);})();
    if (l.gold) parts.push(`üüß${l.gold}`);})();
    if (l.white) parts.push(`‚¨úÔ∏è${l.white}`);})();
    if (l.green) parts.push(`üü©${l.green}`);})();
    if (l.blue) parts.push(`üü¶${l.blue}`);})();
    if (l.gray) parts.push(`‚òëÔ∏è${l.gray}`);})();
    return parts.length ? parts.join(" ") : "‚Äî";
  }
  function fmtInvShort(inv){
    const parts=[];
    for (const id of QUICK){
      const v = clamp0(inv && inv[id]);})();
      if (v) parts.push(`${META[id].e}${v}`);})();
    }
    return parts.length ? parts.join(" ") : "‚Äî";
  }

  // ---------- Core actions (–∫–∞–∫ –≤ –≤–æ—Ä–∫–µ—Ä–µ) ----------
  function craftUp(inv0){
    const inv = Object.assign(Object.create(null), inv0);})();
    const log = [];
    let k = Math.floor(getNum(inv,"gray") / 3);})();
    if (k){ setNum(inv,"gray", getNum(inv,"gray") - 3*k);})(); setNum(inv,"blue", getNum(inv,"blue") + k);})(); log.push(`‚òëÔ∏è√ó${3*k} ‚Üí üü¶√ó${k}`);})(); }
    k = Math.floor(getNum(inv,"blue") / 2);})();
    if (k){ setNum(inv,"blue", getNum(inv,"blue") - 2*k);})(); setNum(inv,"green", getNum(inv,"green") + k);})(); log.push(`üü¶√ó${2*k} ‚Üí üü©√ó${k}`);})(); }
    k = Math.floor(getNum(inv,"green") / 2);})();
    if (k){ setNum(inv,"green", getNum(inv,"green") - 2*k);})(); setNum(inv,"white", getNum(inv,"white") + k);})(); log.push(`üü©√ó${2*k} ‚Üí ‚¨úÔ∏è√ó${k}`);})(); }
    k = Math.floor(getNum(inv,"white") / 2);})();
    if (k){ setNum(inv,"white", getNum(inv,"white") - 2*k);})(); setNum(inv,"gold", getNum(inv,"gold") + k);})(); log.push(`‚¨úÔ∏è√ó${2*k} ‚Üí üüß√ó${k}`);})(); }
    k = Math.floor(getNum(inv,"gold") / 2);})();
    if (k){ setNum(inv,"gold", getNum(inv,"gold") - 2*k);})(); setNum(inv,"emerald", getNum(inv,"emerald") + k);})(); log.push(`üüß√ó${2*k} ‚Üí üíé√ó${k}`);})(); }
    k = Math.floor(getNum(inv,"emerald") / 3);})();
    if (k){ setNum(inv,"emerald", getNum(inv,"emerald") - 3*k);})(); setNum(inv,"ruby", getNum(inv,"ruby") + k);})(); log.push(`üíé√ó${3*k} ‚Üí üö®√ó${k}`);})(); }
    return { inv, log: log.length ? log : ["–ù–µ—á–µ–≥–æ —Å–æ–±–∏—Ä–∞—Ç—å."] };
  }

  function breakDown(inv0){
    const inv = Object.assign(Object.create(null), inv0);})();
    const log = [];

    // TV breakdown requires fee and burns it
    let k = Math.min(getNum(inv,"tv"), getNum(inv,"fee"));})();
    if (k){
      setNum(inv,"tv", getNum(inv,"tv") - k);})();
      setNum(inv,"fee", getNum(inv,"fee") - k);})();
      setNum(inv,"white", getNum(inv,"white") + k);})();
      log.push(`üßø√ó${k} + üîò√ó${k} ‚Üí ‚¨úÔ∏è√ó${k} (üîò —Å–≥–æ—Ä–∞–µ—Ç)`);})();
    }

    k = getNum(inv,"ruby");})();
    if (k){ setNum(inv,"ruby",0);})(); setNum(inv,"emerald", getNum(inv,"emerald") + 3*k);})(); log.push(`üö®√ó${k} ‚Üí üíé√ó${3*k}`);})(); }
    k = getNum(inv,"emerald");})();
    if (k){ setNum(inv,"emerald",0);})(); setNum(inv,"gold", getNum(inv,"gold") + 2*k);})(); log.push(`üíé√ó${k} ‚Üí üüß√ó${2*k}`);})(); }
    k = getNum(inv,"gold");})();
    if (k){ setNum(inv,"gold",0);})(); setNum(inv,"white", getNum(inv,"white") + 2*k);})(); log.push(`üüß√ó${k} ‚Üí ‚¨úÔ∏è√ó${2*k}`);})(); }
    k = getNum(inv,"white");})();
    if (k){ setNum(inv,"white",0);})(); setNum(inv,"green", getNum(inv,"green") + 2*k);})(); log.push(`‚¨úÔ∏è√ó${k} ‚Üí üü©√ó${2*k}`);})(); }
    k = getNum(inv,"green");})();
    if (k){ setNum(inv,"green",0);})(); setNum(inv,"blue", getNum(inv,"blue") + 2*k);})(); log.push(`üü©√ó${k} ‚Üí üü¶√ó${2*k}`);})(); }
    k = getNum(inv,"blue");})();
    if (k){ setNum(inv,"blue",0);})(); setNum(inv,"gray", getNum(inv,"gray") + 3*k);})(); log.push(`üü¶√ó${k} ‚Üí ‚òëÔ∏è√ó${3*k}`);})(); }

    return { inv, log: log.length ? log : ["–ù–µ—á–µ–≥–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å."] };
  }

  function splitGray(inv0){
    const inv = Object.assign(Object.create(null), inv0);})();
    const k = getNum(inv,"gray");})();
    const log=[];
    if (k){ setNum(inv,"gray", 0);})(); setNum(inv,"fee", getNum(inv,"fee") + 2*k);})(); log.push(`‚òëÔ∏è√ó${k} ‚Üí üîò√ó${2*k}`);})(); }
    return { inv, log: log.length ? log : ["–ù–µ—Ç ‚òëÔ∏è –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è."] };
  }

  function craftTv(inv0){
    const inv = Object.assign(Object.create(null), inv0);})();
    const k = Math.min(getNum(inv,"white"), getNum(inv,"fee"));})();
    const log=[];
    if (k){
      setNum(inv,"white", getNum(inv,"white") - k);})();
      setNum(inv,"fee", getNum(inv,"fee") - k);})();
      setNum(inv,"tv", getNum(inv,"tv") + k);})();
      log.push(`‚¨úÔ∏è√ó${k} + üîò√ó${k} ‚Üí üßø√ó${k} (üîò —Å–≥–æ—Ä–∞–µ—Ç)`);})();
    }
    return { inv, log: log.length ? log : ["–ù—É–∂–Ω–æ ‚¨úÔ∏è –∏ üîò."] };
  }

  // ---------- Quick parse (emoji+number) ----------
  function escapeRegExp(str){ return String(str).replace(/[.*+?^${}()|[\]\\]/g, "\\$&");})(); }
  function parseEmojiCounts(text){
    const out = Object.create(null);})();
    const s = String(text || "");})();

    // Pass 1: explicit known emojis (handles multi-codepoint correctly)
    for (const [emo, id] of Object.entries(EMOJI_TO_ID)){
      const re = new RegExp(escapeRegExp(emo) + "\\s*(\\d{1,9})", "g");})();
      let m;
      while ((m = re.exec(s)) !== null){
        const n = clamp0(m[1]);})();
        out[id] = (out[id] || 0) + n;
      }
    }
    return out;
  }

  // ---------- Profiles storage ----------
  function loadProfiles(){
    const raw = localStorage.getItem(LS_KEY);})();
    if (!raw) return [];
    try{
      const arr = JSON.parse(raw);})();
      if (!Array.isArray(arr)) return [];
      return arr
        .map(x => (x && typeof x==="object") ? ({ name:String(x.name||"").trim(), inv: x.inv||{} }) : null)
        .filter(Boolean)
        .filter(x => x.name);})();
    }catch{ return []; }
  }
  function saveProfiles(list){
    const clean = list.map(p => ({ name:p.name, inv: cloneInv(p.inv||{}) }));})();
    localStorage.setItem(LS_KEY, JSON.stringify(clean));})();
  }
  function upsertProfile(name, inv){
    const n = normalizeName(name);})();
    if (!n) return;
    const ps = loadProfiles();})();
    const idx = ps.findIndex(p => p.name === n);})();
    const item = { name:n, inv: cloneInv(inv||{}) };
    if (idx === -1) ps.push(item);})();
    else ps[idx] = item;
    ps.sort((a,b)=>a.name.localeCompare(b.name,"ru",{numeric:true,sensitivity:"base"}));})();
    saveProfiles(ps);})();
  }
  function getProfile(name){
    const n = normalizeName(name);})();
    const ps = loadProfiles();})();
    return ps.find(p => p.name === n) || null;
  }

  // ---------- UI build ----------
  function buildInvGrid(rootEl, inv, onChange){
    rootEl.innerHTML = "";
    for (const id of QUICK){
      const cell = document.createElement("div");})();
      cell.className = "cell";
      const left = document.createElement("div");})();
      left.className = "left";
      const emo = document.createElement("div");})();
      emo.className = "emo";
      emo.textContent = META[id].e;
      const nm = document.createElement("div");})();
      nm.className = "name";
      nm.textContent = META[id].n;
      left.appendChild(emo);})(); left.appendChild(nm);})();

      const input = document.createElement("input");})();
      input.type = "number";
      input.min = "0";
      input.step = "1";
      input.value = String(clamp0(inv[id] || 0));})();
      input.addEventListener("change", () => onChange(id, clamp0(input.value)));})();

      cell.appendChild(left);})();
      cell.appendChild(input);})();
      rootEl.appendChild(cell);})();
    }
  }

  function refreshProfilesSelect(){
    const sel = $("#src");})();
    const cur = sel.value || "sandbox";
    sel.innerHTML = "";
    const o0 = document.createElement("option");})();
    o0.value = "sandbox";
    o0.textContent = "–ü–µ—Å–æ—á–Ω–∏—Ü–∞";
    sel.appendChild(o0);})();

    const ps = loadProfiles();})();
    for (const p of ps){
      const o = document.createElement("option");})();
      o.value = "p:" + p.name;
      o.textContent = p.name;
      sel.appendChild(o);})();
    }
    if ([...sel.options].some(o=>o.value===cur)) sel.value = cur;
  }

  // ---------- Sandbox state ----------
  const sandbox = { inv: Object.create(null), log:"‚Äî" };

  function renderSandbox(){
    const root = document.getElementById('invGrid');
    if (!root) return;
    buildInvGrid($("#inv"), sandbox.inv, (id, val) => {
      setNum(sandbox.inv, id, val);})();
      sandbox.log = `–ò–∑–º–µ–Ω–µ–Ω–æ: ${META[id].e} ‚Üí ${val}`;
      renderAll();})();
    // Mark active nav link
    try{
      const fn = (location.pathname.split('/').pop() || 'index.html');})();
      document.querySelectorAll('.topnav a').forEach(a=>{
        const href = a.getAttribute('href')||'';
        if (href === fn) a.classList.add('active');})();
      });})();
    }catch(_){ }

    // Top navigation
    document.querySelectorAll('.nonexistent-selector').forEach(btn => {
      btn.addEventListener('click', () => {
        const el = sel ? document.querySelector(sel) : null;
        if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });})();
      });})();
    });})();

    fillDbTypes();})();
    renderDb();})();

    // DB events
    const dbQ = document.getElementById('dbQ');})();
    const dbType = document.getElementById('dbType');})();
    const dbSort = document.getElementById('dbSort');})();
    if (dbQ) dbQ.addEventListener('input', renderDb);})();
    if (dbType) dbType.addEventListener('change', renderDb);})();
    if (dbSort) dbSort.addEventListener('change', renderDb);})();

    // preload memo text
    const mt = document.getElementById('memoText');})(); if (mt) mt.textContent = MEMO;
    });})();

    const eq = sbGrayValue(sandbox.inv);})();
    $("#eq").textContent = String(eq);})();
    $("#lad").textContent = fmtLadder(ladderFromGray(eq));})();
    $("#short").textContent = fmtInvShort(sandbox.inv);})();
    $("#log").textContent = sandbox.log || "‚Äî";
  }

  // ---------- Parser A/B ----------
  function stripCodeFences(s){
    s = String(s||"");})();
    return s.replace(/```[\s\S]*?```/g, (m)=>m.replace(/^```[^\n]*\n?/,"").replace(/```$/,""));})();
  }

  function parseUsersFromPosts(aText, bText){
    const text = (stripCodeFences(aText) + "\n" + stripCodeFences(bText)).replace(/\r/g,"");})();
    const lines = text.split("\n").map(x=>x.trim()).filter(Boolean);})();

    const users = Object.create(null);})();

    const tabRe = /^(.{1,64}?)\s*(?:\||‚îÇ)\s*(.+)$/u;

    for (const ln0 of lines){
      const ln = ln0
        .replace(/^–ö–∞—Ä—Ç—ã\s+—Å–ø–∏–∫–µ—Ä–æ–≤.*$/iu,"")
        .trim();})();
      if (!ln) continue;

      let name="", rest="";
      const m = ln.match(tabRe);})();
      if (m){
        name = normalizeName(m[1]);})();
        rest = m[2];
      } else {
        const hasAny = QUICK.some(id => ln.includes(META[id].e));})();
        if (!hasAny) continue;

        let idx = -1;
        for (const id of QUICK){
          const j = ln.indexOf(META[id].e);})();
          if (j !== -1) idx = (idx === -1) ? j : Math.min(idx, j);})();
        }
        if (idx === -1) continue;
        name = normalizeName(ln.slice(0, idx));})();
        rest = ln.slice(idx);})();
      }

      if (!name) continue;
      if (/^–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª/i.test(name) || /^–∏—Ç–æ–≥–æ/i.test(name) || /^total/i.test(name)) continue;

      const counts = parseEmojiCounts(rest);})();
      if (!Object.keys(counts).length) continue;

      if (!users[name]) users[name] = Object.create(null);})();
      for (const id of QUICK){
        if (counts[id] !== undefined){
          users[name][id] = (users[name][id] || 0) + counts[id];
        }
      }
    }

    const out = [];
    for (const [name, inv] of Object.entries(users)){
      out.push({ name, inv: cloneInv(inv) });})();
    }
    out.sort((a,b)=>a.name.localeCompare(b.name,"ru",{numeric:true,sensitivity:"base"}));})();
    return out;
  }

  function summarizeParsed(users){
    let totalCards = 0;
    let totalGray = 0;
    for (const u of users){
      for (const id of QUICK) totalCards += clamp0(u.inv[id] || 0);})();
      totalGray += sbGrayValue(u.inv);})();
    }
    const top = users
      .map(u => ({ name:u.name, gray: sbGrayValue(u.inv), inv:u.inv }))
      .sort((a,b)=>b.gray - a.gray || a.name.localeCompare(b.name,"ru",{numeric:true,sensitivity:"base"}))
      .slice(0, 10);})();
    return { totalCards, totalGray, top };
  }

  function formatUsersList(users){
    if (!users.length) return "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å —ç–º–æ–¥–∑–∏ –∏ —á–∏—Å–ª–∞–º–∏.";
    const lines = [];
    for (const u of users){
      lines.push("‚Ä¢ " + u.name);})();
      lines.push("  " + fmtInvShort(u.inv));})();
    }
    return lines.join("\n");})();
  }
  function formatTop(top){
    if (!top.length) return "‚Äî";
    const lines = [];
    let i=1;
    for (const t of top){
      lines.push(String(i).padStart(2,"0") + ". " + t.name);})();
      lines.push("    " + "‚òëÔ∏è" + t.gray + " ¬∑ " + fmtInvShort(t.inv));})();
      i++;
    }
    return lines.join("\n");})();
  }

  let parsedCache = [];

  function doParse(){
    const users = parseUsersFromPosts($("#pa").value, $("#pb").value);})();
    parsedCache = users;
    const sum = summarizeParsed(users);})();

    $("#pUsers").textContent = String(users.length);})();
    $("#pTotalCards").textContent = String(sum.totalCards);})();
    $("#pTotalGray").textContent = String(sum.totalGray);})();
    $("#pOut").textContent = users.length ? formatUsersList(users) : "‚Äî";
    $("#pTop").textContent = formatTop(sum.top);})();
  }

  function toProfiles(){
    if (!parsedCache.length) doParse();})();
    if (!parsedCache.length){
      $("#pOut").textContent = "–°–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç—ã: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.";
      return;
    }
    for (const u of parsedCache){
      // keep only base keys
      const inv = Object.create(null);})();
      for (const id of QUICK){
        const v = clamp0(u.inv[id] || 0);})();
        if (v) inv[id] = v;
      }
      upsertProfile(u.name, inv);})();
    }
    refreshProfilesSelect();})();
    $("#pOut").textContent = $("#pOut").textContent + "\n\n‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ —Å–æ–∑–¥–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã.";
  }

  // ---------- Render all ----------
  
  // ---------- Cards DB ----------
  function uniq(arr){
    const s = new Set();})(); const out=[];
    for (const x of arr){ if (!s.has(x)){ s.add(x);})(); out.push(x);})(); } }
    return out;
  }
  function cardValue(c){
    if (!c) return null;
    if (typeof c.value === "number") return c.value;
    // if it is one of currency emojis but value missing
    const m = {"‚òëÔ∏è":1,"üü¶":3,"üü©":6,"‚¨úÔ∏è":12,"üüß":24,"üíé":48,"üö®":144};
    return m[c.emoji] ?? null;
  }
  function fillDbTypes(){
    const sel = document.getElementById("dbType");})();
    if (!sel) return;
    const types = uniq(CARDS.map(c=>c.type).filter(Boolean)).sort((a,b)=>a.localeCompare(b,"ru",{sensitivity:"base"}));})();
    // preserve first "All"
    while (sel.options.length > 1) sel.remove(1);})();
    for (const t of types){
      const o = document.createElement("option");})();
      o.value = t; o.textContent = t;
      sel.appendChild(o);})();
    }
  }
  function matchesQuery(c, q){
    if (!q) return true;
    q = q.toLowerCase();})();
    return (String(c.name||"").toLowerCase().includes(q) ||
            String(c.emoji||"").toLowerCase().includes(q) ||
            String(c.type||"").toLowerCase().includes(q));})();
  }
  function renderDb(){
    const listEl = document.getElementById("dbList");})();
    const cardEl = document.getElementById("dbCard");})();
    const countEl = document.getElementById("dbCount");})();
    if (!listEl || !cardEl || !countEl) return;

    const q = String((document.getElementById("dbQ")||{}).value || "").trim();})();
    const t = String((document.getElementById("dbType")||{}).value || "");})();
    const s = String((document.getElementById("dbSort")||{}).value || "name");})();

    let rows = CARDS.slice();})();
    if (t) rows = rows.filter(c => c.type === t);})();
    if (q) rows = rows.filter(c => matchesQuery(c, q));})();

    if (s === "type"){
      rows.sort((a,b)=> String(a.type||"").localeCompare(String(b.type||""),"ru",{sensitivity:"base"}) || String(a.name||"").localeCompare(String(b.name||""),"ru",{sensitivity:"base"}));})();
    } else if (s === "value"){
      rows.sort((a,b)=>{
        const av = cardValue(a);})(); const bv = cardValue(b);})();
        const an = (av===null? 1e18 : av);})();
        const bn = (bv===null? 1e18 : bv);})();
        return an - bn || String(a.name||"").localeCompare(String(b.name||""),"ru",{sensitivity:"base"});})();
      });})();
    } else {
      rows.sort((a,b)=> String(a.name||"").localeCompare(String(b.name||""),"ru",{sensitivity:"base"}));})();
    }

    countEl.textContent = String(rows.length);})();

    listEl.innerHTML = "";
    if (!rows.length){
      listEl.textContent = "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.";
      return;
    }

    function showCard(c){
      const v = cardValue(c);})();
      const parts = [];
      parts.push(`${c.emoji} ${c.name}`);})();
      parts.push(`–¢–∏–ø: ${c.type || "‚Äî"}`);})();
      parts.push(`–°—Ç–æ–∏–º–æ—Å—Ç—å: ${v===null ? "‚Äî" : (v + " ‚òëÔ∏è")}`);})();
      parts.push("");})();
      if (c.summary) parts.push(c.summary);})();
      if (c.rules){
        parts.push("");})();
        parts.push("–ü—Ä–∞–≤–∏–ª–∞:");})();
        parts.push(c.rules);})();
      }
      if (c.craft){
        parts.push("");})();
        parts.push("–°–±–æ—Ä–∫–∞/—Ä–∞–∑–±–æ—Ä–∫–∞:");})();
        parts.push(c.craft);})();
      }
      cardEl.textContent = parts.join("\n");})();
    }

    for (const c of rows){
      const row = document.createElement("div");})();
      row.className = "dbrow";
      row.setAttribute("role","button");})();
      row.tabIndex = 0;

      const left = document.createElement("div");})();
      left.className = "l";
      const e = document.createElement("div");})();
      e.className = "e";
      e.textContent = c.emoji;
      const txt = document.createElement("div");})();
      txt.style.minWidth = "0";
      const title = document.createElement("div");})();
      title.className = "t";
      title.textContent = c.name || "‚Äî";
      const sub = document.createElement("div");})();
      sub.className = "s";
      sub.textContent = c.summary || "";
      txt.appendChild(title);})(); txt.appendChild(sub);})();
      left.appendChild(e);})(); left.appendChild(txt);})();

      const right = document.createElement("div");})();
      right.className = "r";
      const tag = document.createElement("span");})();
      tag.className = "tag";
      tag.textContent = c.type || "‚Äî";
      const v = cardValue(c);})();
      const tag2 = document.createElement("span");})();
      tag2.className = "tag";
      tag2.textContent = (v===null ? "‚òëÔ∏è‚Äî" : ("‚òëÔ∏è" + v));})();
      right.appendChild(tag);})(); right.appendChild(tag2);})();

      row.appendChild(left);})(); row.appendChild(right);})();

      const open = ()=>showCard(c);})();
      row.addEventListener("click", open);})();
      row.addEventListener("keydown", (ev)=>{ if (ev.key==="Enter" || ev.key===" ") { ev.preventDefault();})(); open();})(); } });})();

      listEl.appendChild(row);})();
    }

    // Auto-select first row if card is empty or says "–í—ã–±–µ—Ä–∏—Ç–µ"
    if (!cardEl.textContent || cardEl.textContent.includes("–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É")){
      showCard(rows[0]);})();
    }
  }

function renderAll(){
    refreshProfilesSelect();})();
    renderSandbox();})();
    renderDb();})();
  }

  // ---------- Events ----------  on("quickApply", "click", () => {
    const parsed = parseEmojiCounts($("#quick").value);})();
    for (const id of QUICK){
      if (parsed[id] !== undefined) setNum(sandbox.inv, id, parsed[id]);})();
    }
    sandbox.log = "–ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω.";
    renderAll();})();
  });})();  on("up", "click", () => {
    const res = craftUp(sandbox.inv);})();
    sandbox.inv = res.inv;
    sandbox.log = res.log.join("\n");})();
    renderAll();})();
  });})();  on("down", "click", () => {
    const res = breakDown(sandbox.inv);})();
    sandbox.inv = res.inv;
    sandbox.log = res.log.join("\n");})();
    renderAll();})();
  });})();  on("split", "click", () => {
    const res = splitGray(sandbox.inv);})();
    sandbox.inv = res.inv;
    sandbox.log = res.log.join("\n");})();
    renderAll();})();
  });})();  on("tv", "click", () => {
    const res = craftTv(sandbox.inv);})();
    sandbox.inv = res.inv;
    sandbox.log = res.log.join("\n");})();
    renderAll();})();
  });})();  on("reset", "click", () => {
    sandbox.inv = Object.create(null);})();
    sandbox.log = "–°–±—Ä–æ—Å.";
    renderAll();})();
  });})();

  const el_parse = document.getElementById("parse");})();
  if (el_parse) el_parse.addEventListener("click", () => { doParse();})(); });})();
  const el_toProfiles = document.getElementById("toProfiles");})();
  if (el_toProfiles) el_toProfiles.addEventListener("click", () => { toProfiles();})(); });})();
  const el_clear = document.getElementById("clear");})();
  if (el_clear) el_clear.addEventListener("click", () => {
    $("#pa").value = "";
    $("#pb").value = "";
    $("#pUsers").textContent = "0";
    $("#pTotalCards").textContent = "0";
    $("#pTotalGray").textContent = "0";
    $("#pOut").textContent = "‚Äî";
    $("#pTop").textContent = "‚Äî";
    parsedCache = [];

  // Memo (always available)
  window.openMemo = function openMemo(){
    $("#memoText").textContent = MEMO;
    const m = $("#memoModal");})();
    m.classList.add("open");})();
    m.setAttribute("aria-hidden","false");})();
  }
  function closeMemo(){
    const m = $("#memoModal");})();
    m.classList.remove("open");})();
    m.setAttribute("aria-hidden","true");})();
  }
  const memoBtn = document.getElementById("memoBtn");})();
  if (memoBtn) memoBtn.addEventListener("click", openMemo);})();
  const memoBtn2 = document.getElementById("memoBtn2");})();
  if (memoBtn2) memoBtn2.addEventListener("click", openMemo);})();
    const memoModal = document.getElementById("memoModal");})();
  if (memoModal) memoModal.addEventListener("click", (e) => {
    const t = e.target;
    if (t && t.getAttribute && t.getAttribute("data-close") === "1") closeMemo();})();
  });})();
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeMemo();})();
  });})();

  // Mobile gesture: swipe down on the sheet to close
  (function(){
    const panel = document.querySelector("#memoModal .modal__panel");})();
    if (!panel) return;
    let y0 = null;
    panel.addEventListener("touchstart", (e) => {
      if (!e.touches || !e.touches.length) return;
      y0 = e.touches[0].clientY;
    }, { passive:true });})();
    panel.addEventListener("touchend", (e) => {
      if (y0 === null) return;
      const t = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0] : null;
      if (!t) { y0 = null; return; }
      const dy = t.clientY - y0;
      y0 = null;
      if (dy > 80) closeMemo();})();
    }, { passive:true });})();
  })();})();


  });})();  on("load", "click", () => {
    const v = $("#src").value;
    if (v === "sandbox") return;
    if (!v.startsWith("p:")) return;
    const name = v.slice(2);})();
    const p = getProfile(name);})();
    if (!p){ sandbox.log = "–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω."; renderAll();})(); return; }
    sandbox.inv = cloneInv(p.inv||{});})();
    sandbox.log = `–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è: ${name}`;
    renderAll();})();
  });})();  on("save", "click", () => {
    const v = $("#src").value;
    if (v === "sandbox"){
      const name = prompt("–ò–º—è –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å");})();
      if (!name) return;
      upsertProfile(name, sandbox.inv);})();
      refreshProfilesSelect();})();
      $("#src").value = "p:" + normalizeName(name);})();
      sandbox.log = `–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ø—Ä–æ—Ñ–∏–ª—å: ${normalizeName(name)}`;
      renderAll();})();
      return;
    }
    if (v.startsWith("p:")){
      const name = v.slice(2);})();
      upsertProfile(name, sandbox.inv);})();
      sandbox.log = `–û–±–Ω–æ–≤–ª—ë–Ω –ø—Ä–æ—Ñ–∏–ª—å: ${name}`;
      renderAll();})();
    }
  });})();

  // ---------- Init ----------
  
  // ---------- Zones (tabs) ----------
  function showZone(id){
    document.querySelectorAll('.zone').forEach(z => z.hidden = true);})();
    const el = document.getElementById(id);})();
    if (el) el.hidden = false;
    document.querySelectorAll('.topnav .btn').forEach(b => {
      b.classList.toggle('active', b.getAttribute('data-zone') === id);})();
    });})();
  }

  function initApp(){

    renderAll();})();

  // JS status badge
  (function(){
    const b = document.createElement("div");})();
    b.textContent = "JS: OK";
    b.style.cssText = "position:fixed;left:10px;bottom:10px;z-index:45;padding:6px 10px;border:1px solid rgba(33,48,66,.9);})();border-radius:999px;background:rgba(22,33,50,.7);})();color:#9ab0c7;font-weight:800;font-size:12px;";
    document.body.appendChild(b);})();
    setTimeout(()=>{ try{ b.remove();})(); }catch(_){} }, 2500);})();
  })();})();

  
  }
  // Start
  try{ initApp();})(); } catch(e){ showFatal(e);})(); }

});})();
</script>
</body>
</html>
